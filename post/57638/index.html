<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          AI生成的烂图，居然可以反过来「微调模型」？ - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="有了 Dreambooth LoRA，基本上用不着像训练大型语言模型那样准备那么多输入数据即可达到这一目的。" />

  <meta name="keywords" content="区块大全, 区块链, 区块链资讯, 区块链快讯, 区块链新闻, 比特币行情" />






<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/57638/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="AI生成的烂图，居然可以反过来「微调模型」？" />
<meta property="og:description" content="有了 Dreambooth LoRA，基本上用不着像训练大型语言模型那样准备那么多输入数据即可达到这一目的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/57638/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-08-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-08-24T00:00:00+00:00" />

<meta itemprop="name" content="AI生成的烂图，居然可以反过来「微调模型」？">
<meta itemprop="description" content="有了 Dreambooth LoRA，基本上用不着像训练大型语言模型那样准备那么多输入数据即可达到这一目的。"><meta itemprop="datePublished" content="2023-08-24T00:00:00+00:00" />
<meta itemprop="dateModified" content="2023-08-24T00:00:00+00:00" />
<meta itemprop="wordCount" content="4658">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AI生成的烂图，居然可以反过来「微调模型」？"/>
<meta name="twitter:description" content="有了 Dreambooth LoRA，基本上用不着像训练大型语言模型那样准备那么多输入数据即可达到这一目的。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">AI生成的烂图，居然可以反过来「微调模型」？</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2023-08-24">
      2023-08-24
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 4658 字 -
        预计阅读 10 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<p><strong>原创：Max Woolf</strong></p>
<p><strong>来源：</strong> <a href="https://mp.weixin.qq.com/s/hsDWJJ9-hPf8v_lrZxbS1A">Founder Park</a></p>
<p>OpenAI 用来改进模型的强化学习过程，是从积极的人类交互中隐式地减少消极行为。</p>
<p>在本文中，作者采取了一种全新的实践方案：用消极的人类交互（即故意选择低质量图像）来隐式地增加积极行为。</p>
<p>有了 Dreambooth LoRA，基本上用不着像训练大型语言模型那样准备那么多输入数据即可达到这一目的。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_puajvff63d.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>不同优化程度的「外星人形状的汉堡（prompt）」</em></p>
<p>作者介绍了 Stable Diffusion XL 1.0 发布的两个核心特性：提示词加权和 Dreambooth LoRA 训练和推理，并结合 Textual Inversion（文本反转）方法训练 Lora，使 Lora 变得更加聪明好用。</p>
<p>作者介绍：Max Woolf（@minimaxir）是 BuzzFeed 的数据科学家，研究 AI/ML 工具与各种开源项目。</p>
<p>原文链接：https://minimaxir.com/2023/08/stable-diffusion-xl-wrong/</p>
<p>以下是文章内容，经 Founder Park 编辑整理。</p>
<h2 id="sdxl简简单单介绍一下">SDXL简简单单介绍一下</h2>
<p>上个月，Stability AI 发布了 Stable Diffusion XL 1.0 （SDXL） 并将其开源，用户无需任何特殊权限即可访问。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_0anaw1yz39.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>SDXL 1.0 输出示例</em></p>
<p>SDXL 实际上是两个模型：一个基本模型和一个可选的细化模型，后者可以显著增强细节表现，并且没有速度开销。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_58tyreaqfj.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>Stable Diffusion 各版本模型之间的相对质量对比</em></p>
<p>注意使用细化模型后质量有了显著提升</p>
<p><strong>SDXL 1.0 Features</strong></p>
<p>值得注意的是，这个版本（SDXL 1.0）是第一批无需特殊手段，就能原生生成 1024x1024 分辨率图像的开源模型之一，其生成图像的细节更加丰富。</p>
<p>Hugging Face 的 diffusers Python 库现在已经全面支持该模型，还做了一些性能优化。</p>
<p>同时，diffusers 还实现了对两个新特性的支持：提示词加权和 Dreambooth LoRA 训练和推理。于是我打算试试看（diffusers 中的SDXL演示代码可到文末查看）。</p>
<p>diffusers 的提示词加权支持利用名为 compel 的 Python 库，以更数学化的方式来加权术语。你可以向给定单词添加任意数量的 + 或 -，以增加或减少其在生成的位置（positional）文本嵌入中的“重要性”，从而影响最终输出。</p>
<p>同样的原理，你还可以包装短语：例如，如果你要生成「San Francisco landscape by Salvador Dali, oil on canvas」，而它却生成了逼真的旧金山照片，那么你就可以把艺术形式框起来，变成「San Francisco landscape by Salvador Dali, (oil on canvas)+++」，让 Stable Diffusion 输出预期的效果。</p>
<p><strong>环境准备</strong></p>
<p>我开了一个云虚拟机，配置了一个新的中档英伟达 L4 GPU（Google Cloud Platform 上的一个 Spot 实例费用总计 0.24 美元/小时），然后就开始干活了。</p>
<p>使用一个 L4 GPU 时，生成每张 1024x1024 图像大约需要 22 秒；并且与之前的 Stable Diffusion 模不同，现在中档 GPU 上一次只能生成一张图像，因为它的 GPU 占用率已经拉满了，所以你得更有耐心才行。降低分辨率可以加快生成速度，但我强烈建议不要这样做，因为生成结果会非常糟糕。</p>
<p><strong>一点个性化配置</strong></p>
<p>在我的测试中，它修复了 Stable Diffusion 2.0 以后引入的大部分提示词问题，特别是设置了更高的无分类器指导值时出现的问题（guiding_scale 默认为 7.5；我喜欢改成 13）</p>
<p>本文中 LoRA 模型生成的所有示例的 guiding_scale 都是13。</p>
<h2 id="入门丨探索-lora">入门丨探索 LoRA</h2>
<p>SDXL 1.0 最重要的更新其实是 Dreambooth LoRA 支持，它让我们得以定制 Stable Diffusion 模型。</p>
<p>Dreambooth 是一种基于非常小的源图像集和一个触发关键字来微调 Stable Diffusion 的技术，这样就能在给定关键字的其他上下文中使用这些图像中的“概念”。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_hfek8au11f.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>Dreambooth 工作原理示意图</em></p>
<p><strong>LoRA 的优势：特定领域的“小模型”</strong></p>
<p>训练 Stable Diffusion 自身时，就算模型比较小，也需要许多昂贵的 GPU 花费很多小时数来训练。</p>
<p>这时 LoRA 就很有用了：它训练的是视觉模型的一小部分，这样只需一个便宜的 GPU，10 分钟就能输出结果，并且最终模型 + LoRA 的质量可与充分微调的模型相媲美（一般来说，当人们提到微调 Stable Diffusion 时往往指的是创建一个 LoRA）。</p>
<p>训练好的 LoRA 是一个独立的小型二进制文件，可以轻松与他人分享，或传到 Civitai 等仓库上。</p>
<p>LoRA 的一个小缺点是一次只能激活一个：我们可以合并多个 LoRA 来兼顾它们的优势，但实际做起来没那么简单。</p>
<p><strong>文本反转实战：Textual Inversion</strong></p>
<p>在 Stable Diffusion LoRA 广泛流行之前有一种方法叫文本反转（textual inversion），它允许文本编码器学习概念，但训练需要很多小时，而且结果可能很难看。</p>
<p>我在之前的博客文章中训练了一个文本反转：Ugly Sonic （索尼克），因为它不在 Stable Diffusion 的源数据集中，所以结果是独一无二的。生成结果如下，好坏参半。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_n6cry35z6e.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>（丑陋）索尼克，但丑得不像样</em></p>
<p>这一次，我觉得用 Ugly Sonic 来训练 LoRA 会是一个很好的测试 SDXL 潜力的案例。</p>
<p>正好 Hugging Face 提供了一个 train_dreambooth_lora_sdxl.py 脚本，拿它就能使用 SDXL 基本模型来训练 LoRA；这个脚本还是开箱即用的，不过我稍微调了下参数。</p>
<p>不夸张地说，训练好的 LoRA 在各种提示词下生成的 Ugly Sonic 图像都更好看、更有条理。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_ot9kais4ls.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>索尼克，但这次有牙了</em></p>
<h2 id="进阶丨深入textual-inversion">进阶丨深入Textual Inversion</h2>
<p>这次试验成功后，我决定重做另一个之前用文本反转做的实验：通过添加提示词 wrong 生成更好地图像。</p>
<p>这次的方法是用一些严重扭曲的低质量图像训练 LoRA，给出的提示词是 wrong，希望 LoRA 可以把 wrong 视为“负面提示”并避开这种情况，生成失真没那么大的图像。</p>
<p>我写了一个 Jupyter Notebook，使用 SDXL 自己创建出了很多“错误”的合成图像，这次还使用了各种提示权重来生成更明显的失败图像实例，例如 blurry（模糊）和 bad hands（画错的手）。</p>
<p>讽刺的是，我们需要使用 SDXL 才能生成高分辨率的失败图像。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_7ws13yvc4e.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p>上面是合成的 wrong 图像的一些例子</p>
<p>里面无意融合了一些2000年代庞克摇滚专辑封面的元素</p>
<p>我训练了这个 LoRA 并将其加载到 Stable Diffusion XL 基础模型中（微调模型不需要 LoRA），同时编写了一个 Jupyter Notebook，对比给定提示词下的以下输出结果：</p>
<p>基础模型 + 没有 LoRA 的 pipeline。（最基本的）</p>
<p>没有 LoRA 的 pipeline，使用 wrong 作为负面提示（加入负面提示）</p>
<p>使用 LoRA 的 pipeline，用 wrong 作为负面提示（理想目标）</p>
<p>各个生成结果的种子都一样，因此三种输出的照片构图应该是差不多的，并且 wrong 的负面提示产生的效果和 LoRA，与基础模型 pipeline 之间的差别应该非常明显。</p>
<p><strong>SDXL 0.9 测试用例</strong></p>
<p>我们先用 SDXL 0.9 演示一个简单提示词开始测试：</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_sz2bbcnvfo.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p>「A wolf in Yosemite National Park, chilly nature documentary film photography」</p>
<p>仔细看上图，不难发现基础模型上的 wrong 提示为背景的森林增加了一些树叶和深度，但 LoRA 加的东西更多：更强大的光照和阴影、更细致的树叶，还改变了狼看相机的视角，看起来更有意思。</p>
<p>然后我在提示词中添加“extreme closeup（非常近的特写）”，并复用之前的种子后，在相似的照片构图下获得了狼的不同视角特写。</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_osfwrw4cf0.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>「An extreme close-up of a wolf in Yosemite National Park, chilly nature documentary film photography」</em></p>
<p>这时 LoRA 的纹理和清晰度都比其他模型好得多，画面也更生动。但需要注意的是，只添加一个 wrong 提示词就会改变视角。</p>
<p>另一个不错的测试用例是食品摄影，我用 DALL-E 2 生成的怪异食品摄影尤其合适。SDXL + wrong 的 LoRA 能否通过一些提示加权来生成看起来很怪异的非欧几何汉堡呢？</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_zpm28g41qd.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>「a large delicious hamburger (in the shape of five-dimensional alien geometry)++++, professional food photography」</em></p>
<p>「一个美味的大汉堡（五维外星人几何形状）++++，专业美食摄影」</p>
<p>答案是它不能，就算调整了很多次提示词也不行。但输出的结果还是很有意思：基础 SDXL 似乎比我想的更字面地理解了提示中的“外星人”部分（并给了它一顶可爱的圆顶帽子！），但 LoRA 的作品更好地理解了提示的含义，做出了一个人类难以食用的“外星人”汉堡，图像风格也更加闪亮。</p>
<p>画人会怎样？带 wrong 的 LoRA 是否可以解决人工智能臭名昭著的不会画手的问题呢？而且我们还在 LoRA 的训练数据中加入了许多这样的例子。我们先来改一下我之前第一次尝试使用Stable Diffusion 2.0 时用的提示词，画一位泰勒·斯威夫特总统：</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_cassy44dje.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>「USA President Taylor Swift (signing papers)++++, photo taken by the Associated Press」</em></p>
<p><em>「美国总统泰勒·斯威夫特（签署文件）++++，美联社拍摄」</em></p>
<p>看看泰勒的右臂：默认的 SDXL 模型输出的结果很离谱，加上 wrong 后实际上更糟糕了，但在 LoRA 中它被修复了！LoRA 的颜色分层要好得多，她的夹克变成了更显眼的白色，而不是黄白色。不过她的两只手还是不能细看：用 SDXL 1.0 绘制人物还是很麻烦，也不可靠！</p>
<p>现在结论很明显了，wrong + LoRA 在每种情况下的输出都比单纯加上 wrong 负面提示的输出更有趣，因此我们下面只对比基本输出与 LoRA 输出。以下是基本模型与 wrong LoRA 的对比示例：</p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_ytdhcr2oup.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>「realistic human Shrek blogging at a computer workstation, hyperrealistic award-winning photo for vanity fair」</em></p>
<p><em>（逼真的人类怪物史莱克在计算机工作站上写博客，名利场的超现实获奖照片）——LoRA 的手画得更好，打光更好。服装更细致，背景更有趣。</em></p>
<p><img src="https://img.bibiqing.com/news/2023/0824/2_vvfcy9euws.png" alt="AI生成的烂图，居然可以反过来「微调模型」？"></p>
<p><em>「pepperoni pizza in the shape of a heart, hyperrealistic award-winning professional food photography」</em></p>
<p><em>（心形意大利辣香肠披萨，超写实，屡获殊荣的专业美食摄影）——意大利辣香肠更细致，有热泡，披萨边缘没有那么多多余的辣肠，外皮看起来更硬</em></p>
<p>带 wrong 的 LoRA 可以在这里获取，不过我无法保证它在 diffusers 之外的接口上的效果。</p>
<p>生成这些图像所用的所有Notebooks都在这个 GitHub 存储库里，包括一个标准 SDXL 1.0 + 微调模型 + 带 wrong 的 LoRA Colab Notebooks，你可以在免费的 T4 GPU 上跑这个Notebooks。如果你想查看本文用到的生成图像的更高分辨率版本，可以访问文章源码。</p>
<h2 id="wrong-到底是怎么回事">Wrong 到底是怎么回事？</h2>
<p>带 wrong 的 LoRA 这个技巧只会提高生成图像的质量和清晰度，但 LoRA 似乎让 SDXL 表现得更聪明了，也更能反映提示词的精神。</p>
<p>在技术层面上，这个负面提示词设定了 diffusion 生成图片的潜在空间区域；对于使用 wrong 的基础模型和 LoRA 来说，该区域是一样的。</p>
<p>我的直觉是，LoRA 重塑了巨大的高维潜在空间中的这个不受欢迎的区域，使其更类似于起始区域，因此正常的生成结果命中这一区域的概率变小了，质量也就得到了改进。（参考上文外星人汉堡的变化过程）</p>
<p>用低质量图像来训练 SDXL 以改进它的水平，从技术上讲是人类反馈强化学习 （RLHF） 的一种形式：这种方式也是 ChatGPT 成功的路径。OpenAI 用来改进模型的强化学习过程是从积极的用户交互中隐式地减少消极行为，而这里我是用消极的用户交互（即故意选择低质量图像）来隐式地增加积极行为。</p>
<p>但有了 Dreambooth LoRA，你基本上用不着像训练大型语言模型那样准备那么多输入数据了。</p>
<p>“负面 LoRA”的潜力还是很大的：我的合成数据集生成参数有很大改进空间，LoRA 也可以训练更长时间。但我对目前为止的结果非常满意，并且希望用负面 LoRA 做更多测试，例如与其他 LoRA 合并，看看它是否可以增强后者（尤其是 wrong LoRA + Ugly Sonic LoRA！）</p>
<p><strong>附：diffusers 中的 SDXL 演示</strong></p>
<p>import torch</p>
<p>from diffusers import DiffusionPipeline, AutoencoderKL</p>
<p># load base SDXL and refiner</p>
<p>vae = AutoencoderKL.from_pretrained(&ldquo;madebyollin/sdxl-vae-fp16-fix&rdquo;,</p>
<p>torch_dtype=torch.float16)</p>
<p>base = DiffusionPipeline.from_pretrained(</p>
<p>&ldquo;stabilityai/stable-diffusion-xl-base-1.0&rdquo;,</p>
<p>vae=vae,</p>
<p>torch_dtype=torch.float16,</p>
<p>variant=&ldquo;fp16&rdquo;,</p>
<p>use_safetensors=True,</p>
<p>)</p>
<p>_ = base.to(&ldquo;cuda&rdquo;)</p>
<p>refiner = DiffusionPipeline.from_pretrained(</p>
<p>&ldquo;stabilityai/stable-diffusion-xl-refiner-1.0&rdquo;,</p>
<p>text_encoder_2=base.text_encoder_2,</p>
<p>vae=base.vae,</p>
<p>torch_dtype=torch.float16,</p>
<p>variant=&ldquo;fp16&rdquo;,</p>
<p>use_safetensors=True,</p>
<p>)</p>
<p>_ = refiner.to(&ldquo;cuda&rdquo;)</p>
<p>generation using both models (mixture-of-experts)</p>
<p>high_noise_frac = 0.8</p>
<p>prompt = &ldquo;an astronaut riding a horse&rdquo;</p>
<p>negative_prompt = &ldquo;blurry, bad hands&rdquo;</p>
<p>image = base(</p>
<p>prompt=prompt,</p>
<p>negative_prompt=negative_prompt,</p>
<p>denoising_end=high_noise_frac,</p>
<p>output_type=&ldquo;latent&rdquo;,</p>
<p>).images</p>
<p>image = refiner(</p>
<p>prompt=prompt,</p>
<p>negative_prompt=negative_prompt,</p>
<p>denoising_start=high_noise_frac,</p>
<p>image=image,</p>
<p>).images[0]​</p>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/57643/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">AI大模型价值对齐：是什么，为什么，怎么做？</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/57659/">
                <span class="next-text nav-default">AI应用创业的共识与非共识</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#sdxl简简单单介绍一下">SDXL简简单单介绍一下</a></li>
    <li><a href="#入门丨探索-lora">入门丨探索 LoRA</a></li>
    <li><a href="#进阶丨深入textual-inversion">进阶丨深入Textual Inversion</a></li>
    <li><a href="#wrong-到底是怎么回事">Wrong 到底是怎么回事？</a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.5e8c82c5ae3f71b40f78c4ff8ea351326a65ddf5771f76c10c6fc7d09808332d.js" integrity="sha256-XoyCxa4/cbQPeMT/jqNRMmpl3fV3H3bBDG/H0JgIMy0=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
