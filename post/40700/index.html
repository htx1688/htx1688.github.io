<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          Foresight Ventures：描绘 分类 支配 MEV - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="相对于 Web1 和 Web2 ，Web3 应对「MEV」负外部性已经做得很好了。" />
<meta name="keywords" content="MEV" />







<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/40700/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="Foresight Ventures：描绘 分类 支配 MEV" />
<meta property="og:description" content="相对于 Web1 和 Web2 ，Web3 应对「MEV」负外部性已经做得很好了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/40700/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-07-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-07-27T00:00:00+00:00" />

<meta itemprop="name" content="Foresight Ventures：描绘 分类 支配 MEV">
<meta itemprop="description" content="相对于 Web1 和 Web2 ，Web3 应对「MEV」负外部性已经做得很好了。"><meta itemprop="datePublished" content="2022-07-27T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-07-27T00:00:00+00:00" />
<meta itemprop="wordCount" content="5692">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Foresight Ventures：描绘 分类 支配 MEV"/>
<meta name="twitter:description" content="相对于 Web1 和 Web2 ，Web3 应对「MEV」负外部性已经做得很好了。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">Foresight Ventures：描绘 分类 支配 MEV</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2022-07-27">
      2022-07-27
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 5692 字 -
        预计阅读 12 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<blockquote>
<p>相对于 Web1 和 Web2 ，Web3 应对「MEV」负外部性已经做得很好了。</p>
</blockquote>
<p>撰文：msfew</p>
<h2 id="mev">MEV?</h2>
<p>Maximal extractable value (MEV) refers to the maximum value that can be extracted from block production in excess of the standard block reward and gas fees by including, excluding, and changing the order of transactions in a block.</p>
<h3 id="a-mev-一直都在">a) MEV 一直都在</h3>
<p>以太坊区块的交易排序自始至终就没有被确定的规则约束, 而是可以根据矿工的偏好来自由修改。Geth 客户端的源码中, 提供了三种示例:</p>
<ul>
<li>
<p>第一种: 仅根据 Nonce 来排序</p>
</li>
<li>
<p>第二种: 根据 gas fee 和 Nonce 来排序 ( 默认选项 )</p>
</li>
<li>
<p>第三种: 根据 owner 排序后, 根据 gas fee 和 Nonce 来排序</p>
</li>
</ul>
<p>其实排序完全是个开放题, 矿工可以自由进行调整, 从而捕捉更大的利润, 也就是我们讨论的主角, MEV。</p>
<p>在 MEV 被称为 MEV 之前, 它的 Alpha 就早已被矿工持续挖掘。flashfish0x 讲述了一个 MEV 的故事。</p>
<p>在 2020 年 8 月之前, Compound 的喂价由特殊的预言机 tx 来更新, 于是会有矿工监控 Mempool, 寻找可以被清算的账户, 利用闪电贷等手段进行套利。因只有套利 tx 正好在价格更新 tx 之后执行才能套利成功, 且普通矿工 ( 当时 ) 会随机排序相同 gas fee 的套利 tx, 所以套利者会以与预言机价格更新 tx 相同的 gas fee 来发送交易, 和其他套利者博取一个随机概率。</p>
<p>2020 年 8 月 11 日之后, Geth 发布了新版本, 预言机价格更新 tx 后到达网络的第一个 tx 将成功套利, 于是获得 tx 信息的速度也被计入了竞争的考量中。</p>
<p>好景不长, 2020 年 8 月 17 日, Compound 切换到了更去中心化的预言机。于是 MEV 捕捉者们的竞赛变成了纯粹的 gas war。他们尽量出到比其他人更高的价格 gas, 直到这个清算操作捕捉不到任何利润, 或者某个人胜出。</p>
<p>区块链网络从一开始就是这么个暗流涌动的黑暗森林, 机器人在未知的环境里和看不见的对手争夺榨取潜在利润的机会。</p>
<h3 id="b-mev-无处不在">b) MEV 无处不在</h3>
<p>在正式解读 MEV 的定义之前, 我们可以看看关于 MEV 的一些数据, 这样就能直观地感受它的存在和影响。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_qt6g4ta43e.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>2022 年 5 月, Uniswap 上超过一半的交易量是由 MEV 机器人贡献的, 而只有少于 20% 的交易量是来自于 Uniswap 的前端页面。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_m592fokm00.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>dex.guru 的数据也显示, 以太坊上 AMM 的交易量很大一部分都是 MEV 机器人所贡献。</p>
<p>MEV 机器人在区块链的黑暗森林里无处不在, 并且始终占据着主导地位。</p>
<h3 id="c-mev-供应链">c) MEV 供应链</h3>
<p>那么一个 MEV 活动是如何产生的呢?</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_k7b368hliy.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>一个 tx 在危机四伏的区块链中的生命周期如下:</p>
<ul>
<li>
<p>生: 普通用户根据意图进行应用交互, 钱包与应用将意图解释成 tx, 发送到公共 tx 池等系统等待处理。</p>
</li>
<li>
<p>老: MEV 搜索者 ( 可能会是矿工 ) 挑出所有有利可图的机会, 尝试通过发送交易或对交易刻意排序捕捉 MEV。</p>
</li>
<li>
<p>病: L1 的矿工 ( 大多数情况下不会是 MEV 搜索者 ) 或者 L2 的 Sequencer 聚合交易并出块。</p>
</li>
<li>
<p>死: 验证者 ( 目前还是矿工 ) 验证区块, 交易正式被确认。</p>
</li>
</ul>
<p>MEV 机器人根据它们 owner 的旨意进行着链上活动, 将 tx 包装好后送给不知情的矿工出块。从好的角度来看, 它们是保证市场稳定和 DApp 活跃度的重要角色; 从不好的角度来看, 它们以自己天生的优势 ( 可以监视整个 Mempool), 对「普通用户」进行着不平等的剥削。</p>
<h3 id="d-mev-的具体定义">d) MEV 的具体定义</h3>
<p>MEV 这个词有两个官方的解释, 它全称可以是:</p>
<ul>
<li>
<p>Miner Extractable Value ( 矿工可提取价值 )</p>
</li>
<li>
<p>Maximum Extractable Value ( 最大提取价值 )</p>
</li>
</ul>
<p>当我们把两个解释结合在一起, 会得到一个最容易理解的概念: MEV 就是矿工可提取的最大价值, 是对于在一个区块特定位置插入 tx 的 incentive。</p>
<p>个人认为, 更全面的 MEV 定义指的是矿工 /Validator/ 机器人 / 预言机 / 除了普通用户之外的角色, 利用矿工的不对称信息, 可提取的最大价值。非普通用户的角色 ( 懂代码, 懂网络机制, 懂使用 MEV), 通过自己的「特权」来额外提取价值, 从而获利, 其实都可以算是广义的 MEV:</p>
<ul>
<li>以出块的矿工为例: 它在看到 Mempool 中的交易后, 当轮到出块时 ( 非常小的概率 ), 完全可以对区块内的交易重新按自己的意愿进行排序 ( 而不是正常的 nonce 和 gas fee 排序 ), 并发送新的交易, 从而获取除了奖励以外更大的额外利润。</li>
</ul>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_asr9jtlzed.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<ul>
<li>
<p>以懂使用 MEV 概念的用户为例: 使用 Flashbots Protect 作为 tx 池, 避免被 MEV 机器人割且 tx 可以得到优先执行等优势; 通过 flashside 或者前文中的 Compound 清算例子, 监视 Mempool 来对 NFT 和链上活动进行套利, 以恰到好处的 gas fee 来让不知情的矿工帮他们捕捉 MEV; 通过 mint。fun 监视 Mempool 来 mint 时下最新的 NFT 项目。</p>
</li>
<li>
<p>以最受剥削的普通用户为例: 早上起床抄底 ETH, 结果第一个 tx 因为 gas 不够, 超时失败了; 中午第二个 tx 好不容易成功但是被夹子割了; 晚上熬夜, 想 mint 个看中很久的 free mint NFT, 但交易刚发送出去就被其他人监视到了, 最终没 mint 到。</p>
</li>
</ul>
<p>MEV 提取者的额外利润源自于区块内的其他交易 ( 几乎就是普通用户发出的 ), 且挤占了每个区块的一部分空间 ( 尽管 gas fee 缺乏弹性需求, 他们的交易通常是区块内首个, 不会直接影响用户 tx), 因此大多数 MEV 通常被视为加在用户身上的隐性税收。</p>
<h2 id="1mev-交易的分类">1.MEV 交易的分类</h2>
<p>以下是 0xminion 对 MEV 活动的清晰图解:</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_g3ihsdr3d7.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>以目的来分的话, MEV 操作可以被分为: 各种套利, 单纯抢先交易, 夹子攻击等。</p>
<p>这些操作的大部分都会是套利操作, 基本都是机器人来发起, 这些机器人都为 gas 的优化做了非常多的功夫, 比如它们通常在钱包里会有无数个代币, 每个都只有一点点数量。这主要是利用了 EIP-2200, 当用户接收 ERC-20 代币时, 如果钱包内有这个代币, 则比没有省更多的 gas。还有就是让地址拥有更多的零。当然以上的套利优化操作与 MEV 本身关系不大。</p>
<p>MEV 本身主要分为以下六种:</p>
<h3 id="a-front-running">a) Front Running</h3>
<p>Front Running 是 MEV 机器人支付稍高的 gas fee 来抢先在 Mempool 的某交易前执行交易, 比如以更低的价格 Swap 代币。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_95pba45vri.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>当这类 MEV 活动没有造成后续的「伤亡」时, 可以被算作中性 ( 不算良性因为主要还是插了队 ); 但很多时候通常会让后续的交易失败或者执行出更差的效果, 因此会被算作恶性。</p>
<p>目前有很多服务专注于提升这类 MEV 的捕捉, 比如 bioXroute ( 类似于黑手党征收保护费后提供更快更隐私的 Mempool, 从而加快 tx 的确认效率以及对外部 Front Running 的防御 )。</p>
<p>问题的核心主要还是这类 MEV 很直接地体现出了 MEV 捕捉者和普通用户的信息不对等。然而, 大家不可能彻底完全公开, 透明, 和统一地对交易排序的方式和算法达成共识。</p>
<h3 id="b-back-running">b) Back Running</h3>
<p>Back Running 是机器人在一笔交易造成价格大幅错位之后尝试不同的套利, 清算, 或交易。</p>
<p>最典型的例子就是我们之前提到的清算套利操作, 这类 MEV 活动整体可以被认为是良性的, 能保证市场的稳定和持续运转。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_zosydyod3o.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>在 Cosmos 这种多链架构的网络上, 这类 MEV 活动尤其做好, 因为网络非常多, 需要这样的活动来让 DeFi 应用保证时刻运转和高效。</p>
<h3 id="c-sandwich-attack">c) Sandwich Attack</h3>
<p>Sandwich Attack 是前两种攻击的结合, 对交易进行前后夹击。通常被称为夹子。例如 MEV 机器人在交易前放一个买单, 在交易后放一个卖单, 让用户的交易在更差的价格执行。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_uujwwv1sev.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>这种攻击有时候可以非常复杂同时伤害可能会非常大, 下图是有机器人通过 1 亿枚 DAI 来夹 Curve 的用户:</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_ab1jgovso4.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>它可以普遍被认为是恶性的, 但某种程度上像高速公路的测速仪一样鞭策着用户使用更合理的滑点, 从而提升网络整体利益。</p>
<h3 id="d-time-bandit-attack">d) Time-Bandit Attack</h3>
<p>时间盗贼攻击是在区块生成之后, 矿工重新挖取区块导致区块链 reorg, 同时在自己挖出的区块中提取价值。这是最恶性的 MEV, 会导致用户交易无效。同时这虽然微乎其微, 但也有发生的可能性。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_g0piy6rqn8.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>中本聪共识下的区块链网络由于最长链原则, 区块 reorg 发生非常频繁 ( 延迟也大 ), 因此这类 MEV 很可能被捕获。而在 Tendermint 或者 PoS 的以太坊中, 这类 MEV 的发生会极大程度上被减少。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_ki3loklf9h.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>关于时间盗贼 MEV 很酷的点是: 未来的事件可以影响过去 ( 将「未来」的交易包含到「过去」的区块中 )。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_e0mlyrg5q4.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>但在简单的量化下, 此类攻击的预期回报率是不高的, 同时会因为蓄意破坏区块链网络的稳定性受到谴责 ( 如 Reorg-as-a-Service), 所以很少会发生。</p>
<h3 id="e-clogging">e) Clogging</h3>
<p>任何 NFT, 资产, 和 Rollup 交易的有效性其实都是通过购买区块链网络上某个区块的某个空间所保证的。以下是区块链区块空间市场的供需:</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_bsq7v1p2t7.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>Clogging 就是通过连续垄断区块全部的空间来赢得例如 Fomo3D 游戏的胜利。</p>
<p>还记得最开头的 Geth 源码吗? 由于大约 70% 的以太坊矿工都是根据默认的 gas fee 排序对交易进行排序, 因此才产生了 Clogging。</p>
<p>但是目前来说, 因为基础设施的完备, 如预言机和 Rollup 等都会风雨无阻地进行交易的提交, MEV 机器人在网络活跃时期进行这样的活动, 成本会比较高。</p>
<h3 id="f-non-broadcast-transactions">f) Non-Broadcast Transactions</h3>
<p>前面几种活动的发起者基本都是 MEV 机器人, 而不是出块矿工本人。</p>
<p>Non-Broadcast Transactions 则是出块矿工偷偷提交的 tx, 也就是在矿工知道自己能出块的时候, 瞬间去给区块塞入一些交易, 从而捕捉 MEV。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_hhoyw8szcv.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>以太坊上大约 2% 的交易都是这样的形式产生的。</p>
<h2 id="2mev-是好是坏">2.MEV 是好是坏?</h2>
<p>前面的分析中我们探讨了不同种类的 MEV, 穿插着我们对每种的评价和好坏与否的评判。那么整体来说, 到底 MEV 是好还是坏? 我们该怎么应对它? 不同的网络会怎么以不同的方式应对它?</p>
<p>MEV 的好坏:</p>
<ul>
<li>
<p>好的 MEV: 用于套利清算 (Back Running), 公开透明市场 (Flashbot, MEV Auction), 并没有影响网络或者其他用户。</p>
</li>
<li>
<p>坏的 MEV: 用于在其他用户身上榨取价值 (Sandwich Attack), 私下发送且不广播 (Time-Bandit Attack, Non-Broadcast Transactions), 影响网络的正常运行 (Clogging)。</p>
</li>
</ul>
<p>从分类数量来看 MEV 貌似是一个不好不坏的中立角色, 但是当考量了 MEV 的本质 (incentive to insert tx into block), 这个 incentive 过于巨大, 会导致追逐坏的 MEV 造成的伤害远大于好的 MEV 的好处。除此之外, MEV 的产生也是源于信息和知识的不对等, 区块链网络里只有 equality 而没有 equity。</p>
<p>综上所述, MEV 的黑市原理 + 巨大利益驱使 + 复杂情况和分类 = 区块链网络的负外部性。</p>
<p>MEV 是坏的, 需要削减。</p>
<h2 id="3-mev-的深入思考与处理">3. MEV 的深入思考与处理</h2>
<p>在分类探讨针对 MEV 的策略之前, 我们需要明确一个点, 就是任何情境下的信息不对称和外部性都是无法被完全消除的, 我们只能去更好的处理它们。</p>
<h3 id="a-解决-mev-黑市与其巨大-incentive">a) 解决 MEV 黑市与其巨大 incentive</h3>
<p>MEV 是不透明的信息和知识而造成的黑市 ( 或者说黑暗森林 ), 这个黑市创造了巨大的利益。我们将通过这个角度来思考针对 MEV 的策略。</p>
<p>整个世界的黑市估值大约为 1。8 亿美元, 且是一种无法消除的必然邪恶。MEV 的市场也远比我们所能观测到的大。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_bzgoedrh83.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>既然这个黑市是必然存在的, 那么何不让它暴露在阳光之下, 让大家都可以自由捕捉和保护自身的 MEV, 这样普通用户就可以形成合力, 且可以削弱 MEV 捕捉者针对用户的对抗。</p>
<p>Flashbots 提出了以下五种市场方案来限制 MEV 的提取, 从而减小 MEV 的总体负外部性:</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_59f8vomc89.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>这些 MEV 削减方案其实类似, 但相同的缺点就是可能会导致区块空间被浪费以及出块的中心化。</p>
<h3 id="b-mev-的复杂情况-场景区别">b) MEV 的复杂情况: 场景区别</h3>
<ul>
<li>
<p>单链场景: 本文的大部分笔墨都是在讨论单个区块链网络中的 MEV 情况, 而现实中这是过于理想化的分析。</p>
</li>
<li>
<p>跨链场景: 一个区块链网络 = 一个 trust zone。实际中会有无数个拥有不同机制和不同 MEV 种类的区块链网络, 这些无数个 trust zone 就让网络间的套利四处存在。比如就算以太坊完全没有 MEV, 但如果 Cosmos 上有套利机会, 那么桥的验证者或者跨链应用机器人就可以在 Cosmos 上捕捉 MEV, 最终以太坊也成了这个 MEV 的受害者。</p>
</li>
</ul>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_jabqps13lg.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<ul>
<li>多链场景: 跨链场景的例子可以无缝套用到 Cosmos 或者 Polkadot 的多链架构中, MEV 的存在具有传染性。</li>
</ul>
<h3 id="b-mev-的复杂情况-网络架构区别">b) MEV 的复杂情况: 网络架构区别</h3>
<p>在我们探索 Rollup 网络的文章中, 我们了解到了单体的 Layer1 和在其之上建立的 Layer2 Rollup 的区别。</p>
<h4 id="1-rollup"><strong>1. Rollup</strong></h4>
<p>Rollup 作为一个「加强版的智能合约」以及「中心化的可信区块链网络」目前均有着中心化的出块和排序机制, 因此有不同的 MEV 表现。目前中心化的 Sequencer ( 也就是只有一个节点 ) 导致所有的 MEV 都可以被 Rollup 捕捉。随着越来越多的流动性和链上活动转移到 L2, L1 矿工所可以获得的收入 ( 包括 MEV) 其实就被转移到了 L2 的 Sequencer。</p>
<p>当然 Rollup 网络自己也意识到且解决了这个问题, 它们对 tx 的公平排序体现了 MEV 的处理。不同 Rollup 对于 MEV 的策略并不相同, 对网络参与者来说意义也就完全不同:</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_hoo9ls6yt6.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>当 L2 步入去中心化且模块化区块链的实现更加盛行后, MEV 的问题需要更多的研究和思考。例如以太坊与 Celestia 的模块化版图就会有所不同。目前来说, 以太坊上的 Rollup 均为 Secured Rollup, 只需构建 n 个双向可信的跨链桥 ( 它们本职就是造这样的桥 ), 共同结算在以太坊上, 而 Celestia 所鼓励的 Sovereign Rollup 各自为政, DA 很可能各不相同, 可能需要 n^2 个桥梁或者类似 IBC 或 XCM 的协议才可以完全打通。这样就建立了完全不同的 MEV 市场和捕捉机会。</p>
<p>由 L2 MEV 的问题, 我们也可以引申出对 L1 和 L2 价值关系的思考, 本文中不做额外展开。</p>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_khpi910tgg.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<h4 id="2-较中心化的区块链"><strong>2. 较中心化的区块链</strong></h4>
<p>为了更快, Solana 是没有公开的 Mempool 的, 而是通过一个类似只有预计将出块的矿工看得到的 Gulf Stream 来作为 Mempool ( 这也是它宕机的原因…)。这就意味着 MEV Bot 是没办法捕捉 MEV 的, 只有运行一个 Validator, 且即将出块的矿工才在理论上有机会对交易进行排序或者发送新的交易从而捕捉 MEV。但结合 Solana 的矿工利润低的情况, 这样的设计其实就导致了矿工的收入更低。于是现在就有 Jito Labs 做类似 Flashbot 的 mev-geth 的客户端, 来让矿工对自己的区块空间进行拍卖, 让 MEV 形成公开的自由市场。同时 Solana 也有 QUIC 和 per account fee market 的解决方案。</p>
<h2 id="3-结语">3. 结语</h2>
<p>对于 MEV 这个话题, 本文仅仅是表层的分析, 有非常多有趣的东西由于篇幅的问题没有被提及 (SGX, PBS 等 ), 推荐你深入阅读文末的 50 余个相关链接。</p>
<p>在一个理想的网络里:</p>
<ul>
<li>
<p>任何人都可以发送交易 (no censorship)</p>
</li>
<li>
<p>没有垃圾信息 (no spam)</p>
</li>
<li>
<p>费率非常低 (low fees)</p>
</li>
</ul>
<p><img src="https://img.bibiqing.com/news/2022/0727/7_htfngbp9iz.png" alt="Foresight Ventures：描绘 分类 支配 MEV"></p>
<p>而 MEV 的存在让鱼和熊掌不可兼得:</p>
<ul>
<li>
<p>no spam + low fees: Web2 一样的 Censorship 必须存在。</p>
</li>
<li>
<p>no censorship + low fees: MEV Searcher 就会发送垃圾信息让正常交易受影响。</p>
</li>
<li>
<p>no censorship + no spam: 你就需要一个费率市场来对交易进行排序, 也就需要高昂的 gas 来优先执行交易。</p>
</li>
</ul>
<p>不过不用太担心, Web1 或者 Web2 或者现实世界一样没有彻底解决「MEV」的负外部性, Web3 的各种方案已经做得非常好。MEV 一直是个开放问题, 没有完全正确的解。</p>
<p>那么 Web3 的我们该咋办?</p>
<ul>
<li>
<p>L1/L2: 设计时优先考虑 MEV。</p>
</li>
<li>
<p>矿工: 放心大胆地在不影响生态的情况下捕获价值, 因为这是网络博弈论的一个部分。</p>
</li>
<li>
<p>DApp 开发者: 设计应用时考虑 MEV, 以及机制是否会伤害普通用户。</p>
</li>
<li>
<p>用户: 理解 MEV, 且尽量不要使用 MEV 机制设计不足的网络或应用。</p>
</li>
<li>
<p>其他人: 鼓励 MEV 的研究, 参与到 MEV 的讨论中, Front run the crisis。</p>
</li>
</ul>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/40708/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">Coingecko Crypto 市场季度报告 2022Q2</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/40691/">
                <span class="next-text nav-default">FTX vs Binance：谁会赢得2022年加密货币交易所的重量级较量？</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#mev">MEV?</a>
      <ul>
        <li><a href="#a-mev-一直都在">a) MEV 一直都在</a></li>
        <li><a href="#b-mev-无处不在">b) MEV 无处不在</a></li>
        <li><a href="#c-mev-供应链">c) MEV 供应链</a></li>
        <li><a href="#d-mev-的具体定义">d) MEV 的具体定义</a></li>
      </ul>
    </li>
    <li><a href="#1mev-交易的分类">1.MEV 交易的分类</a>
      <ul>
        <li><a href="#a-front-running">a) Front Running</a></li>
        <li><a href="#b-back-running">b) Back Running</a></li>
        <li><a href="#c-sandwich-attack">c) Sandwich Attack</a></li>
        <li><a href="#d-time-bandit-attack">d) Time-Bandit Attack</a></li>
        <li><a href="#e-clogging">e) Clogging</a></li>
        <li><a href="#f-non-broadcast-transactions">f) Non-Broadcast Transactions</a></li>
      </ul>
    </li>
    <li><a href="#2mev-是好是坏">2.MEV 是好是坏?</a></li>
    <li><a href="#3-mev-的深入思考与处理">3. MEV 的深入思考与处理</a>
      <ul>
        <li><a href="#a-解决-mev-黑市与其巨大-incentive">a) 解决 MEV 黑市与其巨大 incentive</a></li>
        <li><a href="#b-mev-的复杂情况-场景区别">b) MEV 的复杂情况: 场景区别</a></li>
        <li><a href="#b-mev-的复杂情况-网络架构区别">b) MEV 的复杂情况: 网络架构区别</a></li>
      </ul>
    </li>
    <li><a href="#3-结语">3. 结语</a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.5e8c82c5ae3f71b40f78c4ff8ea351326a65ddf5771f76c10c6fc7d09808332d.js" integrity="sha256-XoyCxa4/cbQPeMT/jqNRMmpl3fV3H3bBDG/H0JgIMy0=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
