<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          回顾以太坊合并 你需要知道的一切 - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="合并不仅仅是为了响应降低全球碳排放的号召，也是为包括分片在内的未来升级奠定基础。" />
<meta name="keywords" content="以太坊2.0, POS, POW" />







<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/43468/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="回顾以太坊合并 你需要知道的一切" />
<meta property="og:description" content="合并不仅仅是为了响应降低全球碳排放的号召，也是为包括分片在内的未来升级奠定基础。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/43468/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-10-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-10-13T00:00:00+00:00" />

<meta itemprop="name" content="回顾以太坊合并 你需要知道的一切">
<meta itemprop="description" content="合并不仅仅是为了响应降低全球碳排放的号召，也是为包括分片在内的未来升级奠定基础。"><meta itemprop="datePublished" content="2022-10-13T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-10-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="9262">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="回顾以太坊合并 你需要知道的一切"/>
<meta name="twitter:description" content="合并不仅仅是为了响应降低全球碳排放的号召，也是为包括分片在内的未来升级奠定基础。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">回顾以太坊合并 你需要知道的一切</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2022-10-13">
      2022-10-13
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 9262 字 -
        预计阅读 19 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<p><strong>目录：</strong></p>
<p>摘要</p>
<p>1. 什么是合并？</p>
<p>2. 为什么要合并？</p>
<p>  2.1 POS有利于分片管理</p>
<p>  2.2 POS是能源友好型</p>
<p>3. 合并后的变化</p>
<p>  3.1 区块结构</p>
<p>  3.2 网络结构</p>
<p>  3.3 共识机制</p>
<p>  3.4 状态</p>
<p>4. 合并的特点</p>
<p>  4.1 产生新区块所需时间的确定性</p>
<p>  4.2 降低客户端的门槛</p>
<p>  4.3 无缝过渡到POS</p>
<p>5.可能的影响</p>
<p>  5.1 通缩</p>
<p>  5.2 节省能源</p>
<p>  5.3 对L1层公链的竞争状况的影响</p>
<p>6. 合并的风险</p>
<p>  6.1 会不会出现硬分叉？</p>
<p>  6.2 中心化的程度是否会加强？</p>
<p>  6.3 MEV会被取消吗？</p>
<p><strong>摘要</strong></p>
<p><strong>目前的以太坊主网将通过与信标链的合并完成从工作量证明到权益证明的过渡，同时保留合约执行功能和当前用户状态的完整历史数据。</strong> 合并不仅仅是为了响应降低全球碳排放的号召，也是为包括分片在内的未来升级奠定基础。</p>
<p>合并后，网络结构、区块结构、共识机制和状态都将出现变化。新的区块将携带Beacon区块的外部以及来自以太坊的工作量证明（POW）的内容。网络将采用共识层和执行层（执行引擎）形式的架构来产生和同步区块。新系统将采用权益证明（POS）共识机制，由验证委员会执行提议和投票的功能，以形成对某些区块的共识。共识层和执行层将被连接起来，同时无状态性也将被引入，这不仅有助于保持去中心化的程度，也有助于未来的分片。</p>
<p>合并后，ETH可能进入通货紧缩状态，网络将更加节能。在此基础上，L1层链的竞争状况将在合并后一定程度上重新定义。以前的ETH矿工将涌向其他网络，在那里额外哈希率可能会提高相应代币的价格；同时，合并后的以太坊网络将主要通过分片进行升级；其他POS L1层生态系统可能会遭遇困境。</p>
<p>凭借其科学的技术路线图和雄心勃勃的愿景，以太坊的表现在合并后将逐步改善，以维持其整体发展。之前的POW网络由于难度炸弹而不得不中止，即使矿工们建立了一个孪生网络但仍然是无效的：在缺乏有价值资产的情况下，它将是不稳定的，所以硬分叉几乎不是问题。以太坊的POS不能解决 &ldquo;富者愈富 &ldquo;的问题，但由于门槛比POW低，所以去中心化的程度没有被破坏，同时最大可提取价值（MEV）在合并后仍然存在。即使在合并过程中出现了一些技术问题，但仍在可控范围内，资产安全也能够得到保障。</p>
<p>6月9日，以太坊Ropsten测试网完成了合并，这是首次基于测试网的合并实践。Ropsten转型后，Goerli和Sepolia也将转型为POS。备受关注的以太坊主网和信标链的合并已经在9月15日完成。合并后，ETH的通货膨胀率将从4%下降到-2%左右。信标链的赎回预计将在第一次硬分叉后立即进行（可能在合并后6个月）。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_1dazimenuz.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>许多资料都提到了合并，但很少有人能提供全面的看法。<strong>在这篇文章中，将从合并的意义、实施的技术原理、对行业的影响和可能的风险等方面给出系统全面的看法。</strong></p>
<p><strong>1.什么是合并</strong></p>
<p>目前的以太坊有两个网络：一个是我们的老朋友——以太坊区块链网络，由POW提供技术支持；另一个是信标链（Beacon Chain，早期也叫ETH 2.0），由POS执行。Beacon Chain在推出后一直保持着自己的地位，智能合约中的ETH质押数量稳步增长，目前数量已达1300万个。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_745ybtplks.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>合并代表了以太坊区块链和信标链的合并。它不是一个简单的数学意义上的组合，相反，它是对两者的整合和升级：摒弃两者中可能破坏以太坊长期发展的糟粕部分，同时保留和结合理想的部分。</p>
<p>也就是说，POW将与以太坊主网分离，同时保留并将智能合约的执行功能、完整的历史数据和当前的用户状态输送到由POS机驱动的信标链。这不仅仅是分叉的正常升级，更是共识机制的重大改变。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_93l3ecelsl.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p><strong>在合并期间，POS验证器将取代POW矿工。</strong> 当合并发生时，Beacon节点将监测当前的POW链，并衡量一个预先确定的难度阈值，这被称为TERMINAL_TOTAL_DIFFICULTY：任何难度超过阈值的区块将被标记为最终的POW区块。从那以后，信标链上的验证者产生和验证的区块都将是POS区块，标志着合并的完成。</p>
<p>如果在这个过程中发生任何技术问题，网络可能会短暂地不可用。但是由于网络上没有共识，资产无论存放在哪里都是安全的，因此不可能发生盗窃行为。交易所可能会在合并期间禁止充提，因此担心在合并过程中由于价格波动而可能被迫清算的用户可考虑提前补充保证金。</p>
<p>与合并相比，之前的计划曾打算在信标链上支持64个分片链作为独立的Ethereum POW运营3-5年，用户可以自由地迁移，因此根本不存在合并。然而，合并是采用没有POW的以太坊主网作为信标链的第一条分片链，并在此后整合两者，同时，用户和应用程序被迁移到POS以太坊网络。合并现在是最可行的路线，这与之前计划中的各种分片链的技术路线和在短期内开发分片链的空前难度有关。相反，合并可以继承以前的执行层，这需要更少的算力。同时在可识别的变化方面对用户的影响很小，他们的过渡成本也很低。</p>
<p><strong>2.为什么要合并？</strong></p>
<p>以太坊的PoS离不开合并。它有两个主要目的：实现分片和节约能源消耗。</p>
<h2 id="21-pos有利于分片管理"><strong>2.1 POS有利于分片管理</strong></h2>
<p>以太坊的主要缺点是性能差，这一点在2017年的Crypto Kittens上被曝光过。为了提升其性能，以太坊社区提交了关于分层和分片的建议。ETH 2.0 因此而出现：通过在分片链上同时处理多个交易，将TPS从15提高到15000，不过由于技术上的限制，官方将分片链从1024条砍到了64条，但分片的想法一直没有被取消。</p>
<p>虽然信标链在以太坊的技术结构中，为各种分片链分配和协调验证者，但在不同的共识机制下，系统的运作方式是不一样的。对于PoS，该系统需要质押32个ETH以获得相应的投票权和质押利益（不会被没收）。巨鲸验证者可以将资金分配到各个账户，变相成为小验证者以获得更多利益。换句话说，即使持有相当数量的ETH，其持有量也会被随机稀释到各个分片链上，所以在一个链上获得更高的投票权几乎是不可能的。因此，验证者在每个链内总是处于平衡状态。除非掌握整个网络51%的质押，否则几乎破坏不了网络的安全。对于PoW来说，矿工就是验证者，矿机掌握在矿工手中，矿工可以按照他们的意愿随时连接或断开，也就是说，哈希率是未知的，可能在短时间内变化。如果一个巨鲸矿工将哈希率集中到整个网络的51%，那么其可以控制分片链并破坏其安全性。所以为了获得更安全的分片结构，PoW必须被PoS所取代。</p>
<h2 id="22-pos是能源友好型"><strong>2.2 POS是能源友好型</strong></h2>
<p>根据Digiconomist的说法，从比特币挖矿的能源消耗来看，以太坊已经取得了进步。然而，以太坊挖矿（PoW）的能源消耗仍然超过44.46 TWH，这相当于芬兰或瑞典的年能源消耗。每笔交易需要耗费84KWH(千瓦时)的电力，可以供应一个家庭2.8天。在PoS下，维护网络系统不需要验证者反复完成消耗能源的哈希计算，能源消耗将减少99.95%以上，提高能源效率超过2000倍。每笔交易只需要35KWH的电，这与看20分钟电视的能耗差不多。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_g54lq8ou6c.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p><strong>3.合并后的变化</strong></p>
<h2 id="31-区块结构"><strong>3.1 区块结构</strong></h2>
<p>从整体上看，合并后的区块可以看做是以太坊PoW区块的内部被外部的信标链区块所覆盖。目前，信标链只对空白区块进行PoS操作，包括槽的序列号、父块根、状态根、证明、存款合约根和验证器削减等。这些操作有一个共同的特点：从用户的角度来看，不涉及任何交易，如发送ETH或与其他合约互动，所以它只是提供一个 &ldquo;形状&rdquo;。合并后的内容也叫执行有效载荷（执行的相关信息），即执行层（以前的PoW节点）提供的以太坊的转移和智能合约的互动，执行层和共识层可以在区块的层面上联系在一起。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_4er5o8g90f.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>由于PoW不再使用，与PoW相关的动态块字符串，如difficulty、mixHash、nonce、ommers、ommerHash，将被自动修改为0或其他常量值；extraData的长度也将被限制在32字节以内。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_npl64cyb4r.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>共识层（信标节点）仍然验证当前信标区块中的所有字符串，但区块中的内容现在由执行层（当前POW）负责验证。</p>
<h2 id="32-网络结构"><strong>3.2 网络结构</strong></h2>
<p>合并后，网络结构将被修改。以太坊采用了共识层和执行层（执行引擎）的结构来生成和同步区块。以前，这两个P2P网络是相互排斥的。合并后它们必须协作和协调，同时保持独立。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_732t813btz.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>智能合约的转移和调用由执行引擎（之前的ETH全节点）打包、广播和执行，GAS费用的小费留在执行引擎中。执行层的主要目标是与执行引擎建立通信，促进执行有效载荷的生成或验证，并在此后根据信标节点的共识创建完整的信标块。引擎API作为两个网络之间的桥梁。共识层通过这个场所从执行引擎中捕获需要同意的内容，并调用其他执行引擎节点来验证交易的合法性。达成共识后，最新的网络状态将通过同一渠道传送给执行引擎，执行引擎从此与该状态同步。换句话说，共识层帮助之前的PoW网络达成共识。</p>
<p>如上所述，合并后会有一个层次关系。共识层类似于指挥官，而执行层则是士兵。在作者看来，下面的eth2客户端图可以明确地展示这种关系。这种层级关系将展现共识机制和状态的变化。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_hdujiwiez2.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<h2 id="33-共识机制"><strong>3.3 共识机制</strong></h2>
<p>合并的目的是为了改变共识机制。以太坊信标链将采用PoS，由验证者委员会提出并投票达成对某一区块的共识。</p>
<p>合并后，一个区块的时间单位将以槽和纪元的形式出现。每12秒创建一个槽，每个纪元包由32个槽组成。一个纪元是一个固定的时间段，核查员将在这个时间段结束时被重新分配。</p>
<p>要成为验证者并获得投票权，用户必须至少投入32个ETH。截至6月20日，有超过403,000名验证者。以太坊的规则是，对于每个纪元，验证者将被随机分配到32个委员会，确保每个委员会至少由128个验证者组成。系统使用随机算法RANDAO为每个时段分配1名验证者，并同时为这个时段随机选择一个委员会。这个验证者负责提出区块，而委员会负责验证和对提案进行投票。一旦投票通过，就会产生一个区块，提议者就会获得奖励；否则，不仅奖励无法获得，保证金也会被没收。同样的情况也适用于普通的核查员：如果正确地遵守规则，就可以得到奖励，而破坏者则会受到惩罚。一旦32个ETH的押金降至16个ETH以下，验证者的资格将终止。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_9jlc0is09k.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>验证者和委员会的随机选择过程与合并前的信标链几乎没有区别。合并后的唯一区别是，合并后的共识必须包含关于执行有效载荷的共识。未来当以太坊上有更多的分片，即4个分片时，每个委员会将被分成4个相等的份额来参与每个分片的投票。</p>
<h2 id="34-状态"><strong>3.4 状态</strong></h2>
<p>无状态成为合并后的一个显著特征，因为网络的变化会改变网络的状态。</p>
<p>首先，以太坊采用账户模式，每个账户由用户状态和合约状态组成。状态，简而言之，就是系统在特定时间的具体外部展示，包括账户余额、合约代码的哈希值或存储数据。完整的以太坊状态记录了所有账户和相关账户余额，以及所有在EVM中部署和执行的智能合约的历史记录。在各个节点达成共识后，主链上的一个区块只有一个状态。此外，系统的状态随着新区块的确认而继续变化。更具体地说，产生区块的节点需要访问和检查系统的当前状态，执行后记录新的状态，并与网络中的其他节点同步。其他客户节点需要验证并执行区块内的交易，以确保网络中始终存在共识。</p>
<p>随着更多的新用户进入和去中心化应用部署在以太坊上，会产生更多的新数据，账户的状态数据会无限制的增长。对于节点来说，将所有的状态数据存储在内存中几乎是不现实的。如果要考虑用硬盘，机械硬盘读取数据的速度可能太慢，这导致与节点同步最新数据的困难，而固态硬盘则不符合成本效益。从长远来看，状态膨胀的问题将要求节点拥有更大的存储空间和更强的性能，这就增加了节点操作的门槛。</p>
<p>为了解决状态膨胀的问题，社区提出了两种可能的解决方案：状态租金和无状态。前者对保留状态的合约征收连续的租金，否则可用性就会终止，不过这在实践中很复杂：一方面，适当的租金收取方式无法确定；另一方面，很难说谁能成为租金的合法接受者，因此，对于租金机制的探索已经停止了。后者的建议使所有的交易和状态的验证过程不存在轻客户端任何状态的实际存储。</p>
<p>问题归结为一个，为什么无状态对PoS以太坊来说如此关键？首先，如果只是简单地在所有Beacon客户端增加eth1执行和所有状态的功能，那么硬件的门槛对节点来说就太高了。考虑到全节点操作的难度越来越大，加剧了以太坊上中心化的程度。而POS以太坊的目的是让所有的节点“要么有所有的状态，要么根本无状态”去参与验证，以维护网络安全，这也带来了网络的高度去中心化。</p>
<p>更重要的是，无状态是分片的先决条件。以太坊未来可能会有多个分片，每个分片由账户和部署在其上的合约状态组成。每个分片随机选择验证者组成一个委员会；也就是说，如果没有无状态，验证者必须拥有所有分片的所有状态数据，这可能会使普通验证者不堪重负，分片可以缓解以太坊的不良性能，而无状态则巩固了高度分散的以太坊网络。无状态在为未来的更新奠定基础方面至关重要，它是一项重大的技术升级。</p>
<p>在无状态下，合并后的以太坊将有3种类型的节点/客户端：</p>
<p>1. 没有ETH1执行引擎的客户端</p>
<p>2. 带有ETH1执行引擎的客户端，具有无状态性</p>
<p>3. 拥有完整状态的ETH1执行引擎的客户端</p>
<p>第一种类型的客户端是最轻便的，因为它只能参与达成共识，但无法从执行层验证交易。它的存在是为了监督共识层上的其他类型的节点。第三种类型的客户端功能齐全，具有所有状态、执行能力和同意能力，换句话说，是一个完整的节点。第三种类型的客户端的数量将很小，因为所需的投资可能是巨大的数据存储、硬件和用于抵押的代币。而第二种类型的客户端在无状态方面具有优势，因为它从具有状态的执行引擎中调用数据，并使用自己的执行力来验证交易的有效性。由于节省了状态存储的成本，第二种类型的客户端在网络中可能更常见。</p>
<p><strong>4.合并的特点</strong></p>
<h2 id="41-产生新区块所需时间的确定性"><strong>4.1 产生新区块所需时间的确定性</strong></h2>
<p>以太坊不会通过调整来使区块产生的难度由此增加矿工的竞争力。在任何情况下，每个区块都可以在每个时段后产生，这需要12秒。其好处是：</p>
<p>Ø 用户体验得到提升。对于链上交易，用户必须等待矿工打包。当生产一个区块所需的时间是已知的，人们可以很容易地估计在某个时间段，哪个区块可能由交易数据组成，从而预测完成交易所需的时间。</p>
<p>Ø 对于一些DeFi协议，代币的释放依赖于在以太坊主网上产生的区块数量，即每1000个区块，将释放1个代币。也就是说，在以前的模式下，即使产生一个区块的时间段也是14秒左右，当网络面临拥堵时，产生一个区块所需的时间变得不确定，这导致了一些DeFi协议的代币释放不稳定。</p>
<p>Ø 对未来的升级进行更准确的规划。根据过去的经验，每次升级都是在区块的某个高度进行的。例如，Berlin升级发生在12,244,000的区块高度。然而，由于生产新区块所需时间的变化，具体计划一直被推迟，这导致了社区对开发团队的不满意，但如果生产区块的时间是确定的，可能会缓解这种情况。</p>
<h2 id="42-降低客户端的门槛"><strong>4.2 降低客户端的门槛</strong></h2>
<p>如前所述，状态膨胀使区块的验证更加困难，这对硬件提出了更严格的要求。合并后，以太坊让之前无法保存完整网络状态的轻量级节点能够参与到网络中，并验证所有交易和状态证明。也就是说巨型矿机不再是节点的必须品，服务级别的设备就足以参与验证网络了。</p>
<h2 id="43-无缝过渡到pos"><strong>4.3 无缝过渡到POS</strong></h2>
<p>通过开发团队的自然设计，合并为将成为执行层的客户端提供了向PoS的无缝过渡。对于终端用户和开发者来说，执行层是与以太坊进行大多数互动的地方，大多数功能（例如EVM、状态和执行方法等）和API不会因为合并而改变，正如有人所说，合并可能会在人睡午觉后完成，甚至没有人会注意到。</p>
<p><strong>5.可能的影响</strong></p>
<p>任何言语都不足以准确描述合并对以太坊的意义。虽然性能瓶颈不能立即解决，但所有的雄心和以太坊的技术路线都必须从这个阶段开始建立。作为航程中的第一步，合并具有深远的意义。</p>
<h2 id="51-通缩"><strong>5.1 通缩</strong></h2>
<p>如前所述，合并将把以太坊从PoW转移到PoS，停止在当前PoW下生产新区块，这也就结束了传统的挖矿奖励，系统中任何增量的ETH只能通过作为节点参与PoS验证过程来铸造，这将大大减少ETH的总供给。从下图来看，当以太坊转移到PoS时，ETH的发行量预计会急剧下降。此外，即使在合并完成后，系统也不会释放任何质押锁定的ETH。ETH的首次解锁将在合并完成后的第一次硬分叉后授予，这将是几个月后的事情。同时，系统对每天的解锁金额和申请者总数都有严格的限额，以防止大规模的抛压。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_jngwfw5d9p.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>虽然ETH的供应被削减，但其净销毁率却在增加。根据目前的数据，ETH的供应量将增长到50万左右，但由于EIP-1559的推出，大约290万（甚至可能更多）将在牛市时被销毁。从以上两个角度来看，即使没有生态系统中的PoS质押和协议的需求，ETH最终也会出现通缩。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_69h4pmrdsf.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>由于供应减少的规则类似于比特币减半的规则，社区将其命名为 &ldquo;三减半&rdquo;，即比特币需要三次减半才能达到合并后ETH的供应减少效果。从历史数据来看，比特币减半与加密货币市场的生命周期密切相关：当比特币的新供应量减半时，其在二级市场上的剩余流动性被慢慢耗尽，导致其价格上涨，形成牛市。同样，作为市值第二大的加密货币，ETH的通缩可能会像比特币那样推动市场的发展。</p>
<p>然而，解锁可能会给ETH持有者带来困扰，并伴随着短期的市价下跌。</p>
<h2 id="52-节省能源"><strong>5.2 节省能源</strong></h2>
<p>尽管比特币的成功令人信服地证明了PoW几乎无可挑剔的资质，但矿工们使用了大量的能源来反复计算可能成为资产的唯一哈希值。鉴于目前全球对低碳活动的强调，PoS可能正是解决方案。</p>
<h2 id="53-对l1层公链的竞争状况的影响"><strong>5.3 对L1层公链的竞争状况的影响</strong></h2>
<p>合并最终会在一定程度上影响目前L1层链的竞争格局。由于难度炸弹的存在，合并后时间消耗会增加得更快。理论上，矿工节点仍然能够通过分叉挖矿，但他们必须接受有限的回报和持续上升的成本之间的权衡——这意味着放弃以太坊。不过可采用的方案也很有限：在类似的PoW链上挖矿或者卖掉挖矿设备换取流动资金来投资POS。对于其他PoW链来说，矿工的涌入和哈希率可能会改善生态系统的现状，并且提升代币的价格。对于其他PoS链来说，即使以太坊被指责有很多缺点，但没有人可以否认以太坊社区仍然主导着这个行业，而且安全性也是一流。合并后，以太坊的缺点将开始得到解决，生态繁荣的L2层生态系统将进一步降低链上交易成本，更不用说分片的整合将从整体上提高网络运营效率，也许对以太坊的需求上升最终会侵蚀其他生态系统。</p>
<p><strong>6.合并的风险</strong></p>
<h1 id="61-会不会出现硬分叉"><strong>6.1 会不会出现硬分叉？</strong></h1>
<p>回顾一下，目前的以太坊是硬分叉的产物。历史会不会重演这次类似ETC的硬分叉事件的大规模升级？基于目前的事实，以太坊遵循科学的技术路线和其宏大的愿景，这将极大地提高其性能，并吸引足够的热度，使未来的发展更具可持续性。另一方面，难度炸弹会迫使PoW矿工从以太网主网这个原始战场上撤退。此外，社区对合并的赞成度也很高，所以没有看到任何一个矿工团体发出对于分叉的强力发声。</p>
<p>假设矿工们可以模拟出一个新的与以太坊类似的网络，例如ETH Legacy，它与PoW以太坊相同，但没有难度炸弹，那么新网络在推出之前就会面临几个强大的竞争对手，其中包括以太坊和其他L1层链，这一挑战是还伴随着资产不足的问题。分叉后，ETH必须复制以太坊的整个账本，不仅分叉的代币会出现（例如ETL），其他资产的衍生品也必须处理，例如WBTC、USDC、DAI、LINK、BAYC、CryptoPunks等。所以无论资产在哪里发行，无论发行机构是中心化还是非中心化，只有资产的唯一性才是重要的，因为只有一个网络上的资产才会被认可。更具体地说，只有PoS以太坊上的资产才会被发行机构认可为真正的资产。显然，ETH Legacy或其他类似的实体更有可能因为业绩不佳、资产不足和共识薄弱而提前消亡。</p>
<p>总之，合并后，硬分叉发生的可能性较小。</p>
<h2 id="62-中心化的程度是否会加强"><strong>6.2 中心化的程度是否会加强？</strong></h2>
<p>有些人可能会担心合并后的中心化程度。PoS的共识机制自然赋予那些拥有大量股份的人更多的利益——换句话说，更多的投票权，这意味着对网络有更多的控制，但是这个问题并不是PoS独有的：在PoW中，拥有更多哈希率的矿工可以用挖矿的奖励购买更多哈希率，增加区块成功生成的机会。因此，PoS并没有解决这个问题，也没有加剧这种情况。</p>
<p>其次，Lido的巨大增长引来了怀疑论者。Lido是一个大规模的赌注池，占到整个网络的三分之一以上，有些人声称，如果再组建一个Lido的存在，这个存在将有能力控制整个网络。值得注意的是，Lido不是由任何单一实体控制的。Lido内部有30个节点运营商，节点相互之间或与Lido之间是相互排斥的。而且这些运营商是顶级的节点运营商，具有可信的记录和法律实体，具有可追溯权，而且他们必须通过DAO的投票，并始终处于DAO的监控之下。所以，把Lido单一地等同于集中式矿池是无效的。相反，Lido在去中心化方面的持续努力在与CEX矿池的竞争中占了上风，也就是说，垄断势力或联合势力占领网络的风险并不像人们普遍认为的那样高。</p>
<p>如前所述，PoS下不需要任何挖矿设备或矿场，这降低了普通用户的准入门槛。从这个角度看，PoS下的以太坊会比PoW下更分散。</p>
<p>总之，中心化的加强并不是一个主要的问题。</p>
<h2 id="63-mev会被取消吗"><strong>6.3 MEV会被取消吗？</strong></h2>
<p>MEV代表矿工可提取的价值，本质上是矿工在产生新区块时的一种套利行为——类似于传统金融交易中的前置操作。具体来说，由于链上区块的空间有限，提交的交易将首先进入内存池等待矿工打包。对于矿工来说，决定这些交易被处理和上链的顺序的权利在他们手中，通常情况下，矿工会根据收到的GAS费用的多少来决定：GAS费用多的交易会优先得到处理。因此，链上交易处理的优先级不是取决于提交的时间，而是取决于用户愿意提供多少GAS费用，这种活动给矿工带来的额外利润是MEV。</p>
<p>当它变为PoS时，处理的程序并没有太大的变化，执行引擎代替矿工决定订单，这仍然是同一群人的事。因此，MEV的问题并没有变化。</p>
<p><img src="https://img.bibiqing.com/news/2022/1013/15_9ohmarhhho.png" alt="回顾以太坊合并 你需要知道的一切"></p>
<p>参考文献</p>
<p>[1]. https://tim.mirror.xyz/sR23jU02we6zXRgsF_oTUkttL83S3vyn05vJWnnp-Lc</p>
<p>[2]. <a href="https://ethresear.ch/t/eth1-eth2-client-relationship/7248">https://ethresear.ch/t/eth1-eth2-client-relationship/7248</a></p>
<p>[3]. <a href="https://blog.ethereum.org/2021/11/29/how-the-merge-impacts-app-layer/">https://blog.ethereum.org/2021/11/29/how-the-merge-impacts-app-layer/</a></p>
<p>[4]. <a href="https://blog.lido.fi/the-road-to-trustless-ethereum-staking/">https://blog.lido.fi/the-road-to-trustless-ethereum-staking/</a></p>
<p>原文作者：火币研究院   翻译：小橙子</p>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/43461/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">关于SEC调查无聊猿NFT的解读</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/43485/">
                <span class="next-text nav-default">金色Web3.0日报 | Uniswap以16.6亿美元估值完成1.65亿美元融资</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#21-pos有利于分片管理"><strong>2.1 POS有利于分片管理</strong></a></li>
    <li><a href="#22-pos是能源友好型"><strong>2.2 POS是能源友好型</strong></a></li>
    <li><a href="#31-区块结构"><strong>3.1 区块结构</strong></a></li>
    <li><a href="#32-网络结构"><strong>3.2 网络结构</strong></a></li>
    <li><a href="#33-共识机制"><strong>3.3 共识机制</strong></a></li>
    <li><a href="#34-状态"><strong>3.4 状态</strong></a></li>
    <li><a href="#41-产生新区块所需时间的确定性"><strong>4.1 产生新区块所需时间的确定性</strong></a></li>
    <li><a href="#42-降低客户端的门槛"><strong>4.2 降低客户端的门槛</strong></a></li>
    <li><a href="#43-无缝过渡到pos"><strong>4.3 无缝过渡到POS</strong></a></li>
    <li><a href="#51-通缩"><strong>5.1 通缩</strong></a></li>
    <li><a href="#52-节省能源"><strong>5.2 节省能源</strong></a></li>
    <li><a href="#53-对l1层公链的竞争状况的影响"><strong>5.3 对L1层公链的竞争状况的影响</strong></a></li>
  </ul>

  <ul>
    <li><a href="#62-中心化的程度是否会加强"><strong>6.2 中心化的程度是否会加强？</strong></a></li>
    <li><a href="#63-mev会被取消吗"><strong>6.3 MEV会被取消吗？</strong></a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.5e8c82c5ae3f71b40f78c4ff8ea351326a65ddf5771f76c10c6fc7d09808332d.js" integrity="sha256-XoyCxa4/cbQPeMT/jqNRMmpl3fV3H3bBDG/H0JgIMy0=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
