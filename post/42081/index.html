<!DOCTYPE html>
<html
  lang="zh-cn"
  itemscope
  itemtype="http://schema.org/WebPage"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
          长文解读：AMM 演化史 - 区块大全
        </title>
    

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="佚名" /><meta name="description" content="自金融概念出现以来，就有了构建对应的金融“市场”" />
<meta name="keywords" content="区块链" />







<meta name="generator" content="Hugo 0.120.4" />


<link rel="canonical" href="/post/42081/" />





<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.d8d87b982993a745e5e7b6a6cbf257be8c3e82aab5e485f0908ad7e6c3501ab2.css" integrity="sha256-2Nh7mCmTp0Xl57amy/JXvow&#43;gqq15IXwkIrX5sNQGrI=" media="screen" crossorigin="anonymous">







<meta property="og:title" content="长文解读：AMM 演化史" />
<meta property="og:description" content="自金融概念出现以来，就有了构建对应的金融“市场”" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/42081/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-08-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-08-30T00:00:00+00:00" />

<meta itemprop="name" content="长文解读：AMM 演化史">
<meta itemprop="description" content="自金融概念出现以来，就有了构建对应的金融“市场”"><meta itemprop="datePublished" content="2022-08-30T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-08-30T00:00:00+00:00" />
<meta itemprop="wordCount" content="7929">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="长文解读：AMM 演化史"/>
<meta name="twitter:description" content="自金融概念出现以来，就有了构建对应的金融“市场”"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




  </head>
  <body>
    <div id="back-to-top"></div>

    <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">区块大全</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          
        
      </li>
    

    
  </ul>
</nav>


    
      






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

    

    

    


    <header id="header" class="header">
      <div class="logo-wrapper">
  <a href="/" class="logo">
    
      区块大全
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="/categories/">分类</a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

    </header>

    <div id="mobile-panel">
      <main id="main" class="main bg-llight wallpaper">
        <div class="content-wrapper">
    <div id="content" class="content">
      <article class="post">
        
        <header class="post-header">
          <h1 class="post-title">长文解读：AMM 演化史</h1>
          

          <div class="post-meta">
  <div class="post-meta-author">
    by
      佚名
    
  </div>

  <div class="post-meta-time">
    <time datetime="2022-08-30">
      2022-08-30
    </time>
  </div>

  


  <div class="post-meta__right">
    <span class="post-meta-more">
        约 7929 字 -
        预计阅读 16 分钟
      </span>

    <div class="post-meta-category">
        <a href="/categories/%E5%85%B6%E5%AE%83%E6%96%87%E7%AB%A0/"> 其它文章 </a>
          
      </div>


    
    


    
    
  </div>
</div>

        </header>

        
        <div class="post-content">
          <table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">币安网</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/binance?ref=githubio">注册链接</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/binance?ref=githubio">币安是全球领先的区块链生态系统，推出了一系列产品，其中包括最大的加密货币交易平台。我们的使命是在未来成为全球性加密货币基础架构供应商。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">欧易OKX</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/okx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/okx?ref=githubio">欧易是全球著名的数字资产交易平台之一，主要面向全球用户提供比特币、莱特币、以太币等数字资产的币币和衍生品交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">HTX火币</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/htx?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/htx?ref=githubio">火币全球专业站，是火币集团旗下服务于全球专业交易用户的创新数字资产国际站，致力于发现优质的创新数字资产投资机会。</a>
            </td>
        </tr>
    </tbody>
</table>
<p><strong>自金融概念出现以来，就有了构建对应的金融“市场”，这一概念最早可以追溯到 17 世纪的香料交易中，中间商通过买卖香料份额向投资者提供更高的流动性，但如今的做市商已经发生了巨大的变化。</strong> 今天，做市商可以通过对股票、外汇甚至实物资产提供流动性，并以公开报价的方式购买任何资产。随着时间的推移，金融市场也在快速发展，在过去的几年里，我们见证了去中心化金融 (DeFi) 的快速增长，看到了自动化做市的兴起。在本文中，我将主要分析自动化做市的发展历史及对加密市场的影响。</p>
<p>首先，我简要介绍了自动做市的历史以及它如何是如何演变的；之后将讨论了三代 AMM 及其在加密市场中的细分应用市场。随着时间的推移，数学、应用平台和智能合约的复杂性也随之增加，我希望通过本文，让区块链新手和资深用户都能够了解自动化做市商的演变，并更好地了解它的发展路线。<br>
想要全面掌握本文内容，你首先需要了解以下几个定义：</p>
<ul>
<li>
<p>区块链： 一个分散的分布式数据库，由各个节点对交易进行不可篡改的持续验证。区块链也是所有加密资产、去中心化应用程序和智能合约的底层技术。</p>
</li>
<li>
<p>去中心化金融(DeFi) ： 基于智能合约和区块链技术运行的金融产品，DeFi开启了数字金融民主化的革命。</p>
</li>
<li>
<p>自动做市商(AMM) ：一个分散的资产交易池，允许用户通过其流动性来进行加密货币的无缝交易。</p>
</li>
<li>
<p>去中心化交易所(DEX) ：点对点平台，允许用户在没有中介的情况下交易加密资产，通常使用 AMM 作为其交易池。</p>
</li>
<li>
<p>流动性池：存储在智能合约中的加密资产的数字资产“池”，AMM 在流动资金池之上运行。</p>
</li>
<li>
<p>流动性提供者(LP)：相当于 AMM 中的做市商，指将其加密资产存入流动性池以增加流动性的人，作为回报，他们将获得相关交易池所产生的交易费用奖励。</p>
</li>
</ul>
<p>与流行的观点相反，自动化做市商并不是纯粹为加密货币市场而发明的。事实上，几十年以来，学术界就已经对 AMM 进行了相当深入的研究。早在 2002年， Robin Hanson 在对对数市场评分规则的研究中就首次提到了 AMM ，后来，对 AMM 研究主要围绕在信息聚合（2004）、预测市场（2006）、贝叶斯模型（2012）以及博彩市场（2012 年）等非加密领域中。</p>
<p>AMM 第一次在加密领域的引用， 是 Vitalik Buterin 于 2016 年发表的一篇 Reddit 帖子，文中他讨论了以运行预测市场相同的方式来构建去中心化交易所的想法。之后，Vitalik 的这一想法开始在社区流传开来，并被一个社区迅速跟进，两年后，Vitalik 又发布了一篇关于 AMM 的后续文章，详细说明了他如何看待去中心化交易所的作用，几个月后，几个月后，Hayden Adams 宣布推出Uniswap协议，从而启动了第一代加密货币 AMM的历史。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_jb0yyne64z.png" alt="长文解读：AMM 演化史"></p>
<h2 id="第一代amm构建基础">第一代AMM：构建基础</h2>
<p>Uniswap 以一种非常实用的方式把自动做市商引入到了加密领域，从而彻底改变了自动做市商。他们提出了名为恒定乘积的做市商（CPMM）模型，这是一个确保 DEX 保持持续流动性的公式。</p>
<p><strong>恒定积做市商(CPMM)与 Uniswap 的崛起</strong></p>
<p>Uniswap 引入了恒定积做市商公式，以确保在以太坊的代币交易中具有恒定的流动性，公式如下：</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_ykpru5y1bw.png" alt="长文解读：AMM 演化史"></p>
<p>其中Rx和Ry指每种代币的储备量，f是交易费用，k是一个常数，简化版的写法如下：</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_yrk6jtd372.png" alt="长文解读：AMM 演化史"></p>
<p>其中x是 Token 1，y是 Token 2，k是常数。</p>
<p>从本质上说，Uniswap 是将两种正在交易的资产组合成一个流动资金池。Uniswap 的目标是确保无论交易规模大小，流动性池的资产规模都能保持不变。我们打个比方：假设资产 x 是 ETH，资产 y 是 DAI，为了保持 k 不变，x (ETH) 和 y (DAI) 只能此消彼长，当你购买 ETH 时，池中的 y (DAI) 增加，x (ETH) 减少，于是交易池将变得不平衡，会向流入到池中的资产倾斜，这时，套利者会参与进来以换取利润（注：当交易池发生倾斜时，代表资产价格发生偏离于是存在套利空间），最终重新回归平衡。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_3oo81h8ych.png" alt="长文解读：AMM 演化史"></p>
<p>x*y=k 做市商，Vitalik Buterin</p>
<p>Uniswap CPMM 模型是AMM的一次范式转变，原因有几个。首先，它是第一个将中间人完全移除的去中心化交易所，第二，实现了流动性、快速交易与链上机制的结合，能以正确的价格进行报价，这是革命性的，当然最令人印象深刻的是，完成这些仅仅用了约 300 行代码。自推出以来，Uniswap 一直是迄今为止使用量最大的 DEX。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_hd55nfueqs.png" alt="长文解读：AMM 演化史"></p>
<p>数据来源：Dune Analytics，@hagaetc</p>
<p><strong>CPMM的缺点</strong></p>
<p>尽管 Uniswap 和初代的 CPMM 让 AMM 取得了非常大的进步，但仍然存在一些缺陷，比如：滑点、无常损失和安全风险。</p>
<p>滑点即订单的预期价格与订单实际执行的价格存在差异。鉴于加密货币的波动性，每个代币的价格会因为交易量和活动而产生波动。最常见的是，流动性小或突然面临大交易量的资金池更容易受到滑点的影响。滑点百分比显示特定资产的价格在整个交易中偏移了多少，同时也代表了用户对滑点的容忍度。</p>
<p>无常损失是你存入流动资金池中的资产价格所发生的变化。鉴于流动性池之外发生的价格波动，存入了流动性池的用户（储户）会面临潜在收益的损失。当资产价格变化越大，储户面临的无常损失就越大。因此，就无常损失而言，稳定币的风险要小得多，无常损失之所以得名，是因为损失确实是无常发生的，但我更喜欢说发散损失（divergence loss）。</p>
<p>影响 CPMM 的其他风险主要来自智能合约、平台及其内存池中的固有安全风险。随着生态系统的成熟，安全性和MEV的预防也随之提高，一般来说，任何进入去中心化金融的人都应该准备好遭受财务损失准备，毕竟这个行业还处于非常早期的阶段。</p>
<h3 id="恒定和做市商csmm">恒定和做市商(CSMM)</h3>
<p>和CPMM 类似的另一种模式是恒定和做市商。在此 AMM 中，它非常适合交易中价格变化接近于零的场景，但它不能提供无限的流动性，他们遵循以下公式：</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_f6wsnhsirs.png" alt="长文解读：AMM 演化史"></p>
<p>其中Rx和Ry是每个代币的储备，f是交易费用，k是一个常数。更简单的公式表示为：</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_085sg7h54c.png" alt="长文解读：AMM 演化史"></p>
<p>其中x是 Token 1，y是 Token 2，k是常数。按照这个公式，可以绘制如下一条直线。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_hnvziyaklb.png" alt="长文解读：AMM 演化史"></p>
<p>CSMM 的可视化图( Dmitriy Berenzon )</p>
<p>但是，当出现链下价格与池中的代币不匹配时，这种设计会使交易者和套利者有机会消耗掉池中储备金，破坏流动性池的稳定，使流动性池中的资产集中到了某一种资产中，从而使流动性池无法正常发挥功能。也是因为这个原因使得 CSMM 成为了 AMM 很少被使用的模型。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_bubeki0hpm.png" alt="长文解读：AMM 演化史"></p>
<p>自动化做市商的同质属性（Jensen、Nielsen、Pourpouneh、Ross ）</p>
<h3 id="恒定平均值做市商-cmmm">恒定平均值做市商 (CMMM)</h3>
<p>这类 AMM 模式主要是 Balancer 所推广的恒定平均值做市商（CMMM）。在这个 AMM 中，每个流动性池可以拥有比传统的两种资产更多的资产种类，并且与经典 50:50 的权重系统不同，这种模式下可以对不同资产进行不同的加权，但需要最终保证每个资产储备的加权几何平均值不变。CMMM 满足以下等式：</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_ahvuoe6sym.png" alt="长文解读：AMM 演化史"></p>
<p>其中R是每种资产的储备量，w是每种资产的权重，k是常数。如果是在具有三种资产的相等流动性池中，等式就可以简化如下：</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_lqsv67fvuh.png" alt="长文解读：AMM 演化史"></p>
<p>其中x是 Token 1，y是 Token 2，z是 Token 3，k是常数。在 Balancer 的文档中有非常详细的介绍。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_t7kqjjzbd3.png" alt="长文解读：AMM 演化史"></p>
<p>来源： Balancer白皮书</p>
<p>CMMM 尽管能够同时应用高达八种不同的资产，但第一代 AMM 的问题（如无常损失和低资本效率） CMMM 并没有解决，虽然如此，第一代 AMM 依旧是构建为现代 AMM 的基石。</p>
<h2 id="第二代amm改进缺陷">第二代AMM：改进缺陷</h2>
<p>在第一代 AMM 中，价格波动、无常损失、资本效率、安全性和可用性问题对 AMM 的影响非常大。幸运的是，社会渴望创新，在第一代 AMM 出现后不久，新一代的 AMM 诞生了，我们很难给出它准确的出现时间，但2020 年的 DeFi 之夏无疑是一个重要的催化剂。在新一代 AMM 中最著名的是Curve 的Stableswap。</p>
<h3 id="混合cpmmhybrid-cpmm-与curvefi">混合CPMM(Hybrid-CPMM) 与Curve.Fi</h3>
<p>Curve Finance将传统的CPMM和CSMM相结合，创造了混合型CPMM，也被称为Stableswap（译者注：Stableswap兼具了恒定和的低滑点以及恒定积的无限流动性特点），其中，Curve提出了一个先进的公式，该公式可以创造指数级的密集流动性，这条曲线的大部分属于线性汇率，具体公式如下:</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_c6ujhkyqkj.png" alt="长文解读：AMM 演化史"></p>
<p>其中x是每种资产的储备量，n是资产的数量，D是不变量（储备中的总值），A是放大系数（类似于“杠杆”，代表了曲线的弯曲程度）。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_a2s851sw17.png" alt="长文解读：AMM 演化史"></p>
<p>Curves Stableswap 是一种特殊的 CSMM，流动池平衡时就是CSMM，一旦池变得不平衡就会转向 CPMM，它通过找到自己的市场匹配度，显着减少了相关资产交易时的滑点。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_7th5dzye9d.png" alt="长文解读：AMM 演化史"></p>
<p>Curve白皮书</p>
<p>Curve 的 Stableswap 非常适用于稳定币，因为在这种模式下对交易价格的影响很小，后文我们还将看到 Curve 推出的专为不相关资产设计的第二个版AMM。</p>
<p>Curve 无疑是第二代 AMM 的赢家之一，即使是面对当前的熊市，Curve 锁定的TVL依旧占据了很大的份额。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_uwkv9hfs4r.png" alt="长文解读：AMM 演化史"></p>
<p>数据来源：Dune Analytics，@naings</p>
<p>除了 Curve 之外，第二代 AMM 还取得了许多其他的重大成就，其中的一些扩展也解决了我们在第一代 AMM 中遇到的各种问题。</p>
<h3 id="其他第二代-amm">其他第二代 AMM</h3>
<p>虚拟自动做市商 (vAMM)、衍生品和永续协议</p>
<p>永续协议通过100%链上模式来开启永续合约交易，把 AMM 引入到了一个新的应用领域。简而言之，永续合约是类似于期货合约的衍生品，但没有到期日。永续协议使用与 Uniswap ( x * y = k )相同的 AMM 公式，但没有存储资产的流动性池 (k)。相反，所有资产都存储在智能合约中，其中包含了所有支持 vAMM 的资产。正如 vAMM 的“虚拟”部分所暗示的那样，vAMM 不是交换真实的代币，而是用于交换虚拟合成资产，如衍生品。</p>
<p>自 Perpetual Protocol 推出以来，围绕链上衍生品交易出现了很多创新和炒作，也出现了很多其他的平台比如：Synthetix 、GMX、FutureSwap 等。<br>
主动做市商 (PMM) 和 DODO</p>
<p>为了增加协议的流动性并尽量提高资金利用率，DODO引入了主动做市商 (PMM)。简而言之，PMM 利用链上预言机来收集准确的价格数据并在当前市场价格附近聚合流动性。为此，DODO 需要及时的移动资产池的曲线，以确保有足够的流动性可用，并在整个市场价格上创建一条更平坦的曲线。随着曲线变得越来越平坦，流动性变得更加广泛，用户就可以从较低的滑点中受益。DODO 还实施了单边流动性，一笔交易对应着两个独立的池（一个买入池和一个卖出池），从某些角度上来说 PMM 更接近传统的做市商模式。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_4gvc12opss.png" alt="长文解读：AMM 演化史"></p>
<p>DODO PMM 曲线与 Uniswap AMM 曲线（DODO ）</p>
<p>Bancor</p>
<p>Bancor 是最早的 DeFi 原生项目之一，同时 Bancor 的发展也充满了戏剧性。Bancor是区块链历史上第一个也是最大的以TGE方式启动的AMM。然而，最初几个月的中心化和安全问题阻碍了Bancor 的发展，并最终导致 Uniswap 后来居上获得了市场主导地位。</p>
<p>然而，Bancor 本身也有一些值得一提的创新。最初的 Bancor 协议发明了现在的流动性池，当时他们称其为“relays” 和 “smart tokens”。Bancor V2 和 V2.1 带来了无常损失保护（在资产抵押 100 天后）和单方流动性。Bancor 3 则推出了即时的无常损失保护，自动复利和双面奖励，以及各种其他有趣的功能。然而，近几个月来，该协议存在一些设计问题阻碍了其进入头部DEX队伍的脚步。<br>
SushiSwap 和流动性挖矿</p>
<p>2020 年 8 月，一位匿名开发者分叉了 Uniswap 的源代码，并通过治理Token和质押奖励创建了一个更受 DeFi 社区关注的项目。通过对 Uniswap 吸血鬼攻击， Sushiswap迅速获得了知名度并吸引了大量用户，在 DeFi 历史上，发生了第一次的链上“恶意收购”，攻击后，Sushiswap 获得了近 9% 的 DEX 交易量和大量社区关注。然而，几天后，化名的创始人Chef Nomi 以 38undefined000 ETH（约 1400 万美元）的价格出售了整个开发基金，引起了社区的愤怒，Chef Nomi 返还了资金并发出道歉信息。自有争议的成立以来，Sushiswap 开发了一个备受推崇的 DeFi 生态系统，其中包含一套 DeFi 工具，包括多链 DEX 、借贷市场、代币启动板、流动性网框奖励系统和最近的AMM 开发框架。尽管起步艰难，但 Sushiswap 为自己创造了令人敬畏的声誉。<br>
聚合器</p>
<p>虽然聚合器不是 AMM 发展的核心部分，但在第二代 AMM 时期，出现了另一个值得一提的创新：DEX 聚合器。简而言之，DEX 聚合器可以从不同的 DEX 中获取流动性，并向用户提供最佳的代币交换汇率。最著名的 DEX 聚合器是1inch ，其他的比如：Paraswap、OpenOcean 。最近，CowSwap在聚合器领域也进行了一些引人关注的创新。</p>
<h3 id="回顾第二代-amm">回顾第二代 AMM</h3>
<p>在第二代 AMM 中，我们看到了那些在第一代 AMM 中出现的问题正在通过复杂的数学方程、独特的流动性池设计以及为 AMM 创建各种金融用例来解决。</p>
<h2 id="第三代amm当代巨兽">第三代AMM：当代巨兽</h2>
<p>在剖析了第二代 AMM 的创新之后，人们会认为第三代 AMM 将通过更复杂的研究和解决方案将这些改造提升到一个更高的水平，但第三代 AMM主要由两个从第二代进行自我改造和更新的庞然大物主导：Uniswap V3 和 Curve V2。</p>
<p>在本节中，我们将分析他们的突破性创新、他们的统治地位以及他们如何垄断了市场。我们将以最近几个月带来显着创新的其他几个 AMM 来结束本章，从时间线上看，第三代 AMM 是2021年年中直到最近几个月的加密货币熊市才开始的。</p>
<h3 id="uniswap-v3-和集中流动性">Uniswap V3 和集中流动性</h3>
<p>早期，我们讨论了 Uniswap 的诞生以及其在市场上的主导地位。2020 年 5 月，Uniswap 推出了他们的第二个版本 Uniswap V2，其中引入了 ERC20 对、价格预言机、闪兑以及其他各种技术改进。尽管对平台的表面没有显着的改变，但这无疑是创新的一步。而 Uniswap V3 创造了自动化做市商的一种新范式。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_7htzfjsuln.png" alt="长文解读：AMM 演化史"></p>
<p>Uniswap 的版本  资料来源：Kyros VenturesKyros Ventures</p>
<p>2021 年 3 月，Uniswap宣布了第三次迭代 Uniswap V3。在更新的内容中，他们引入了两个主要的新功能：集中流动性和多费用等级。集中的流动性使 LP 可以精细控制其资本分配的价格范围，从而显着提高资本效率并降低滑点，同时还可以防止任何资产闪跌的情况，灵活的费用使 LP 有机会根据他们存入的货币对预期波动性来调整他们的保证金。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_bksc0wkish.png" alt="长文解读：AMM 演化史"></p>
<p>自 Uniswap V3 推出以来，他们拥有大约 7000 亿美元的交易量，在所有 Uniswap 不同版本的交易中占到 90% ，此外以超过 55 亿美元的 TVL（2021 年 11 月达到 100 亿美元的峰值）占据 DEX 市场份额的绝大部分。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_4k2plos722.png" alt="长文解读：AMM 演化史"></p>
<p>数据来源： Dune Analytics @Bibip</p>
<h3 id="curve-v2-与自动化">Curve V2 与自动化</h3>
<p>我们之前讨论了Curve创建的 Hybrid CPMM、Stableswap 以及它们在直接挂钩资产的去中心化交易中的崛起。在 Uniswap V3 发布几个月后，Curve宣布了他们 Curve V2 与 Uniswap V3 分庭抗礼。</p>
<p>在Curve V2中，Curve扩大了他们的Stableswap创新，并使有效的池子能够用于所有资产，而不仅仅是稳定币。此外，与Uniswap V3类似，Curve也引入了集中的流动性，但有一点需要注意：LP不能选择他们的流动性范围。相反，Curve 的内部造市算法和价格预言机创造了流动性范围，从而为LP创造了一个被动的环境。Curve认为，Uniswap上的集中流动性对于DeFi的新手来说太难了， Curve V2 对新手更加友好。除了自动化的集中流动性，Curve还引入了定制的资金池，以适应任何LPs的想法（尽管创建资金池相当复杂）。</p>
<p>尽管集中的流动性是自动化方面的一个突破性发明，但它也让那些有经验的DeFi用户将无法积极管理他们的资金。再加上Curve令人生畏的用户体验，让更多的山寨币任然选择了 Uniswap。虽说如此，但Curve在效率和价格滑点方面比Uniswap有更好的表现。</p>
<p>在撰写本文时，Curve 的 TVL 确实比 Uniswap 高出约 5 亿美元，尽管其峰值 TVL 是 Uniswap 的两倍多（240 亿美元）。然而，在总量、收入和市值等各种其他指标中，Curve 始终排在 Uniswap 之后。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_d3p2dbi2bu.png" alt="长文解读：AMM 演化史"></p>
<p>Uniswap 和 Curve 过去 180 天的每日总收入（来源：Token Terminal ）</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_8s6mnsfdwb.png" alt="长文解读：AMM 演化史"></p>
<p>Uniswap、Curve 和 Balancer 过去 365 天的每日流通市值（来源：Token Terminal ）</p>
<p>综上所说，Curve 可能会吸引更高级的 DeFi 用户，趋势显示，Curve 的主导地位正在增长，鉴于他们的技术与 Uniswap 相当甚至更强大，市场的认知和应用扩展是阻碍其发展的主要原因。 但最终，Uniswap V3 和 Curve V2 是第三代 AMM 的两个主要的赢家，值得一提的是第三代其他值得注意的 AMM 创新，尽管这些都没有像 Uniswap 和 Curve 那样获得如此多的关注度，但它们的技术也同样不容小觑。</p>
<h3 id="其他第三代amm">其他第三代AMM</h3>
<p>Solidly</p>
<p>Solidly 是基于公链 Fantom 构建的 AMM，允许对相关和非相关资产进行低成本、近零滑点交易。尽管它没有任何显着的 AMM 设计创新，但 Solidly 有着复杂的代币经济学机制，相关的设计激励了交易量和资产量快增长，而不像传统加密 AMM 中仅仅激励流动性提供者。Solidly 因其创始人 Andre Cronje 而声名鹊起，作为 DeFi 之父，他最终选择离开了这个行业，并导致了整个 Fantom TVL 的暴跌，但Solidly 也曾为 Fantom 带来了很多名气。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_hq7o6wsg35.png" alt="长文解读：AMM 演化史"></p>
<p>Lifinity</p>
<p>Lifinity建立在Solana区块链之上，扩展并结合了 Uniswap 和 DODO 的一些AMM机制：主动做市与集中流动性。尽管集中的流动性提高了资本效率，但无常损失的问题仍然普遍存在，因此，Lifinity 在集中流动性的基础上增加了一个积极的做市机制，Pyth预言机。由于 Lifinity 的流动资金池不依赖套利者来保持价格准确，因此大大降低了无常损失的风险。Lifinity 还增加了自动再平衡机制，以确保池中两种资产的价值能保持不变。</p>
<p><img src="https://img.bibiqing.com/news/2022/0830/7_cvwvpmbyo2.png" alt="长文解读：AMM 演化史"></p>
<p>Lifinity 使用预言机和集中流动性的主动做市</p>
<h2 id="amm的未来解决核心问题">AMM的未来：解决核心问题</h2>
<p>在本文中，我们讨论了加密货币 AMM 如何从简单的代数方程演变为创新的生态系统。目前，开发者对 DeFi 的兴趣与日俱增，产品的可用性也在改善。</p>
<p>然而，现在要克服的最大的障碍是在生态系统之上。去中心化金融中的活跃用户仍然只是整个加密货币用户的一小部分，在全球金融系统更是不值一提。要创建新的金融范式，用户是前提。尽管解决无常损失、资本效率和滑点等问题对于促进 DeFi 全球应用有积极影响，但这些创新往往又会使 DeFi 变得更加复杂。好的产品可能是“DeFi 在后，FinTech 在前”（指的是应用程序的底层后端是去中心化金融，而用户体验可以与现代金融科技一样有着无缝的体验），这也是引领这一趋势的必要条件。<br>
从数据上来看，Uniswap 是当前最大的 DEX，在其历史上拥有60 万独立用户，另一方面，Coinbase 作为最大的CEX，拥有超过1 亿的用户。这意味着，即使有超过 1 亿人已经对加密货币感兴趣，但却并没有进入DeFi 领域，本来在DeFi中他们可以掌控自己的资产投资，而那些促进加密用户新手向DeFi过渡的平台将赢得“DEX 战争”的胜利。</p>
<p>其实，我们在许多 DeFi 平台上已经看到了这种趋势。这些协议往往会优先考虑编写良好的文档、简单的布局和游戏化的平台，让初学者更容易进入去中心化的金融世界。</p>
<p>上周，Avalanche 上最大的 DEX Trader Joe宣布了他们新 AMM 流动性账簿，它允许将流动性定价为固定的仓位，将集中流动性的想法更进一步，同时也有着简单易用的一体化金融生态系统，这或许就是当前的发展趋势。最近几个月的其他创新包括混合 AMM 、MEV 捕获 AMM ，以及 DeFi 环境中对比特币用例的增加。对下个月期待已久的ETH 合并也会极大地影响去中心化金融的发展，在以太坊能源消耗减少 99% 后，也将为交易提供更大的带宽。</p>
<p>总而言之，去中心化金融如何获得主流场景的应用仍是摆在我们面前的最大障碍，但通过本文介绍，我可以确定的是这个行业每一天都在进步。</p>
<table>
    <thead>
        <tr>
            <th style="text-align:left">推荐平台</th>
            <th style="text-align:left">链接</th>
            <th style="text-align:left">平台介绍</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Gate芝麻开门</span></td>
            <td style="text-align:left"><span style="white-space:nowrap"><a
                        href="https://www.okbtc.cn/gateio?ref=githubio">平台介绍</a></span></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/gateio?ref=githubio">Gate.io芝麻开门创立于2013年，是全球真实交易量TOP10的加密货币交易平台，向全球数千万用户提供安全可靠、真实透明的数字资产交易服务。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bitget</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bitget?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bitget?ref=githubio">Bitget的背后是一群区块链技术的早期接受者，也是区块链未来发展的信仰者，一直致力于提供安全、一站式的交易解决方案，帮助用户更聪明地交易。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">Bybit</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/bybit?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/bybit?ref=githubio">Bybit通过数字资产与传统金融的结合，引领数字资产的生态发展。提供一流的流动性，致力于打造业内最安全、公平、高效及人性化的交易服务平台。</a>
            </td>
        </tr>
        <tr>
            <td style="text-align:left"><span style="white-space:nowrap">派网</span></td>
            <td style="text-align:left"><a href="https://www.okbtc.cn/pionex?ref=githubio">注册链接</a></td>
            <td style="text-align:left"><a
                    href="https://www.okbtc.cn/pionex?ref=githubio">派网提供多样化的量化交易机器人，用户可依照自身交易需求和策略选择最适合的机器人。 同时派网也提供合约交易与合约网格机器人，给予更方便的合约交易体验。</a>
            </td>
        </tr>
    </tbody>
</table>

        </div>

        
        



        
        


        <footer class="post-footer">
          


          
          <nav class="post-nav">
            
              <a class="prev" href="/post/42082/">
                
                <i class="iconfont">
                  <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

                </i>
                <span class="prev-text nav-default">用户叫好创作者叫苦 NFT交易版税到底该怎么收？</span>
                <span class="prev-text nav-mobile">上一篇</span>
              </a>
            
              <a class="next" href="/post/42028/">
                <span class="next-text nav-default">“无聊猿”IP合作 饶不过的授权和CC0</span>
                <span class="prev-text nav-mobile">下一篇</span>
                
                <i class="iconfont">
                  <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

                </i>
              </a>
          </nav>
        </footer>
      </article>

      
      
        
      


      
      


    </div>

    
    <nav class="toc" id="toc">
    <div class="toc-title">文章目录</div>
    <div class="toc-content custom-scrollbar">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#第一代amm构建基础">第一代AMM：构建基础</a>
      <ul>
        <li><a href="#恒定和做市商csmm">恒定和做市商(CSMM)</a></li>
        <li><a href="#恒定平均值做市商-cmmm">恒定平均值做市商 (CMMM)</a></li>
      </ul>
    </li>
    <li><a href="#第二代amm改进缺陷">第二代AMM：改进缺陷</a>
      <ul>
        <li><a href="#混合cpmmhybrid-cpmm-与curvefi">混合CPMM(Hybrid-CPMM) 与Curve.Fi</a></li>
        <li><a href="#其他第二代-amm">其他第二代 AMM</a></li>
        <li><a href="#回顾第二代-amm">回顾第二代 AMM</a></li>
      </ul>
    </li>
    <li><a href="#第三代amm当代巨兽">第三代AMM：当代巨兽</a>
      <ul>
        <li><a href="#uniswap-v3-和集中流动性">Uniswap V3 和集中流动性</a></li>
        <li><a href="#curve-v2-与自动化">Curve V2 与自动化</a></li>
        <li><a href="#其他第三代amm">其他第三代AMM</a></li>
      </ul>
    </li>
    <li><a href="#amm的未来解决核心问题">AMM的未来：解决核心问题</a></li>
  </ul>
</nav>
    </div>
  </nav>


  </div>

      </main>

      <footer id="footer" class="footer">
        <div class="icon-links">
  

<a href="https://www.okbtc.cn/binance?ref=githubio" class="iconfont">
  <img src="/image/logo/binance.png" width="36px" height="36px" alt="binance">
</a>

<a href="https://www.okbtc.cn/okx?ref=githubio" class="iconfont">
  <img src="/image/logo/okx.png" width="36px" height="36px" alt="okx">
</a>

<a href="https://www.okbtc.cn/htx?ref=githubio" class="iconfont">
  <img src="/image/logo/htx.png" width="36px" height="36px" alt="htx">
</a>

<a href="https://www.okbtc.cn/gateio?ref=githubio" class="iconfont">
  <img src="/image/logo/gateio.png" width="36px" height="36px" alt="gateio">
</a>

<a href="https://www.okbtc.cn/bitget?ref=githubio" class="iconfont">
  <img src="/image/logo/bitget.png" width="36px" height="36px" alt="bitget">
</a>

<a href="https://www.okbtc.cn/bybit?ref=githubio" class="iconfont">
  <img src="/image/logo/bybit.png" width="36px" height="36px" alt="bybit">
</a>

<a href="https://www.okbtc.cn/pionex?ref=githubio" class="iconfont">
  <img src="/image/logo/pionex.png" width="36px" height="36px" alt="pionex">
</a>



</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    2023
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        coin
        
      </span></span>

  
  

  
</div>

      </footer>

      <div class="button__back-to-top">
        <a href="#back-to-top">
          <i class="iconfont">
            
            <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

          </i>
        </a>
      </div>
    </div>
    
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.5e8c82c5ae3f71b40f78c4ff8ea351326a65ddf5771f76c10c6fc7d09808332d.js" integrity="sha256-XoyCxa4/cbQPeMT/jqNRMmpl3fV3H3bBDG/H0JgIMy0=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







  </body>
</html>
